!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.dolphin=e()}}(function(){var e;return function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/_core").Map},{"../modules/_core":16,"../modules/es6.map":65,"../modules/es6.object.to-string":66,"../modules/es6.string.iterator":67,"../modules/es7.map.to-json":68,"../modules/web.dom.iterable":69}],2:[function(e,t,n){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],3:[function(e,t,n){t.exports=function(){}},{}],4:[function(e,t,n){t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],5:[function(e,t,n){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":33}],6:[function(e,t,n){var r=e("./_for-of");t.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},{"./_for-of":24}],7:[function(e,t,n){var r=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},{"./_to-index":55,"./_to-iobject":57,"./_to-length":58}],8:[function(e,t,n){var r=e("./_ctx"),o=e("./_iobject"),i=e("./_to-object"),a=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var _,y,v=i(t),m=o(v),b=r(s,p,3),g=a(m.length),w=0,k=n?h(t,g):c?h(t,0):void 0;g>w;w++)if((d||w in m)&&(_=m[w],y=b(_,w,v),e))if(n)k[w]=y;else if(y)switch(e){case 3:return!0;case 5:return _;case 6:return w;case 2:k.push(_)}else if(l)return!1;return f?-1:u||l?l:k}}},{"./_array-species-create":10,"./_ctx":17,"./_iobject":30,"./_to-length":58,"./_to-object":59}],9:[function(e,t,n){var r=e("./_is-object"),o=e("./_is-array"),i=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&(t=t[i],null===t&&(t=void 0))),void 0===t?Array:t}},{"./_is-array":32,"./_is-object":33,"./_wks":62}],10:[function(e,t,n){var r=e("./_array-species-constructor");t.exports=function(e,t){return new(r(e))(t)}},{"./_array-species-constructor":9}],11:[function(e,t,n){var r=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};t.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":12,"./_wks":62}],12:[function(e,t,n){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],13:[function(e,t,n){"use strict";var r=e("./_object-dp").f,o=e("./_object-create"),i=(e("./_hide"),e("./_redefine-all")),a=e("./_ctx"),s=e("./_an-instance"),c=e("./_defined"),u=e("./_for-of"),l=e("./_iter-define"),f=e("./_iter-step"),d=e("./_set-species"),h=e("./_descriptors"),p=e("./_meta").fastKey,_=h?"_s":"size",y=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};t.exports={getConstructor:function(e,t,n,l){var f=e(function(e,r){s(e,f,t,"_i"),e._i=o(null),e._f=void 0,e._l=void 0,e[_]=0,void 0!=r&&u(r,n,e[l],e)});return i(f.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[_]=0},"delete":function(e){var t=this,n=y(t,e);if(n){var r=n.n,o=n.p;delete t._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),t._f==n&&(t._f=r),t._l==n&&(t._l=o),t[_]--}return!!n},forEach:function(e){s(this,f,"forEach");for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),h&&r(f.prototype,"size",{get:function(){return c(this[_])}}),f},def:function(e,t,n){var r,o,i=y(e,t);return i?i.v=n:(e._l=i={i:o=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[_]++,"F"!==o&&(e._i[o]=i)),e},getEntry:y,setStrong:function(e,t,n){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),d(t)}}},{"./_an-instance":4,"./_ctx":17,"./_defined":18,"./_descriptors":19,"./_for-of":24,"./_hide":27,"./_iter-define":36,"./_iter-step":37,"./_meta":40,"./_object-create":41,"./_object-dp":42,"./_redefine-all":48,"./_set-species":50}],14:[function(e,t,n){var r=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":6,"./_classof":11}],15:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_export"),i=e("./_meta"),a=e("./_fails"),s=e("./_hide"),c=e("./_redefine-all"),u=e("./_for-of"),l=e("./_an-instance"),f=e("./_is-object"),d=e("./_set-to-string-tag"),h=e("./_object-dp").f,p=e("./_array-methods")(0),_=e("./_descriptors");t.exports=function(e,t,n,y,v,m){var b=r[e],g=b,w=v?"set":"add",k=g&&g.prototype,C={};return _&&"function"==typeof g&&(m||k.forEach&&!a(function(){(new g).entries().next()}))?(g=t(function(t,n){l(t,g,e,"_c"),t._c=new b,void 0!=n&&u(n,v,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!m||"clear"!=e)&&s(g.prototype,e,function(n,r){if(l(this,g,e),!t&&m&&!f(n))return"get"==e&&void 0;var o=this._c[e](0===n?0:n,r);return t?this:o})}),"size"in k&&h(g.prototype,"size",{get:function(){return this._c.size}})):(g=y.getConstructor(t,e,v,w),c(g.prototype,n),i.NEED=!0),d(g,e),C[e]=g,o(o.G+o.W+o.F,C),m||y.setStrong(g,e,v),g}},{"./_an-instance":4,"./_array-methods":8,"./_descriptors":19,"./_export":22,"./_fails":23,"./_for-of":24,"./_global":25,"./_hide":27,"./_is-object":33,"./_meta":40,"./_object-dp":42,"./_redefine-all":48,"./_set-to-string-tag":51}],16:[function(e,t,n){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],17:[function(e,t,n){var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":2}],18:[function(e,t,n){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],19:[function(e,t,n){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":23}],20:[function(e,t,n){var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":25,"./_is-object":33}],21:[function(e,t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],22:[function(e,t,n){var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s="prototype",c=function(e,t,n){var u,l,f,d=e&c.F,h=e&c.G,p=e&c.S,_=e&c.P,y=e&c.B,v=e&c.W,m=h?o:o[t]||(o[t]={}),b=m[s],g=h?r:p?r[t]:(r[t]||{})[s];h&&(n=t);for(u in n)l=!d&&g&&void 0!==g[u],l&&u in m||(f=l?g[u]:n[u],m[u]=h&&"function"!=typeof g[u]?n[u]:y&&l?i(f,r):v&&g[u]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):_&&"function"==typeof f?i(Function.call,f):f,_&&((m.virtual||(m.virtual={}))[u]=f,e&c.R&&b&&!b[u]&&a(b,u,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},{"./_core":16,"./_ctx":17,"./_global":25,"./_hide":27}],23:[function(e,t,n){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],24:[function(e,t,n){var r=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),c=e("./core.get-iterator-method"),u={},l={},n=t.exports=function(e,t,n,f,d){var h,p,_,y,v=d?function(){return e}:c(e),m=r(n,f,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(i(v)){for(h=s(e.length);h>b;b++)if(y=t?m(a(p=e[b])[0],p[1]):m(e[b]),y===u||y===l)return y}else for(_=v.call(e);!(p=_.next()).done;)if(y=o(_,m,p.value,t),y===u||y===l)return y};n.BREAK=u,n.RETURN=l},{"./_an-object":5,"./_ctx":17,"./_is-array-iter":31,"./_iter-call":34,"./_to-length":58,"./core.get-iterator-method":63}],25:[function(e,t,n){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],26:[function(e,t,n){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],27:[function(e,t,n){var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":19,"./_object-dp":42,"./_property-desc":47}],28:[function(e,t,n){t.exports=e("./_global").document&&document.documentElement},{"./_global":25}],29:[function(e,t,n){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":19,"./_dom-create":20,"./_fails":23}],30:[function(e,t,n){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":12}],31:[function(e,t,n){var r=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},{"./_iterators":38,"./_wks":62}],32:[function(e,t,n){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":12}],33:[function(e,t,n){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],34:[function(e,t,n){var r=e("./_an-object");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(i){var a=e["return"];throw void 0!==a&&r(a.call(e)),i}}},{"./_an-object":5}],35:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},{"./_hide":27,"./_object-create":41,"./_property-desc":47,"./_set-to-string-tag":51,"./_wks":62}],36:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),c=e("./_iterators"),u=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",_="keys",y="values",v=function(){return this};t.exports=function(e,t,n,m,b,g,w){u(n,t,m);var k,C,P,M=function(e){if(!h&&e in O)return O[e];switch(e){case _:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",j=b==y,x=!1,O=e.prototype,A=O[d]||O[p]||b&&O[b],T=A||M(b),S=b?j?M("entries"):T:void 0,N="Array"==t?O.entries||A:A;if(N&&(P=f(N.call(new e)),P!==Object.prototype&&(l(P,E,!0),r||s(P,d)||a(P,d,v))),j&&A&&A.name!==y&&(x=!0,T=function(){return A.call(this)}),r&&!w||!h&&!x&&O[d]||a(O,d,T),c[t]=T,c[E]=v,b)if(k={values:j?T:M(y),keys:g?T:M(_),entries:S},w)for(C in k)C in O||i(O,C,k[C]);else o(o.P+o.F*(h||x),t,k);return k}},{"./_export":22,"./_has":26,"./_hide":27,"./_iter-create":35,"./_iterators":38,"./_library":39,"./_object-gpo":44,"./_redefine":49,"./_set-to-string-tag":51,"./_wks":62}],37:[function(e,t,n){t.exports=function(e,t){return{value:t,done:!!e}}},{}],38:[function(e,t,n){t.exports={}},{}],39:[function(e,t,n){t.exports=!0},{}],40:[function(e,t,n){var r=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,s=0,c=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return c(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return u&&p.NEED&&c(e)&&!i(e,r)&&l(e),e},p=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},{"./_fails":23,"./_has":26,"./_is-object":33,"./_object-dp":42,"./_uid":61}],41:[function(e,t,n){var r=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},c="prototype",u=function(){var t,n=e("./_dom-create")("iframe"),r=i.length,o=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object</script"+o),t.close(),u=t.F;r--;)delete u[c][i[r]];return u()};t.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=u(),void 0===t?n:o(n,t)}},{"./_an-object":5,"./_dom-create":20,"./_enum-bug-keys":21,"./_html":28,"./_object-dps":43,"./_shared-key":52}],42:[function(e,t,n){var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":5,"./_descriptors":19,"./_ie8-dom-define":29,"./_to-primitive":60}],43:[function(e,t,n){var r=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},{"./_an-object":5,"./_descriptors":19,"./_object-dp":42,"./_object-keys":46}],44:[function(e,t,n){var r=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":26,"./_shared-key":52,"./_to-object":59}],45:[function(e,t,n){var r=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},{"./_array-includes":7,"./_has":26,"./_shared-key":52,"./_to-iobject":57}],46:[function(e,t,n){var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":21,"./_object-keys-internal":45}],47:[function(e,t,n){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],48:[function(e,t,n){var r=e("./_hide");t.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},{"./_hide":27}],49:[function(e,t,n){t.exports=e("./_hide")},{"./_hide":27}],50:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_core"),i=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":16,"./_descriptors":19,"./_global":25,"./_object-dp":42,"./_wks":62}],51:[function(e,t,n){var r=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"./_has":26,"./_object-dp":42,"./_wks":62}],52:[function(e,t,n){var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":53,"./_uid":61}],53:[function(e,t,n){var r=e("./_global"),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":25}],54:[function(e,t,n){var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):(i-55296<<10)+(a-56320)+65536)}}},{"./_defined":18,"./_to-integer":56}],55:[function(e,t,n){var r=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":56}],56:[function(e,t,n){var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],57:[function(e,t,n){var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":18,"./_iobject":30}],58:[function(e,t,n){var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":56}],59:[function(e,t,n){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":18}],60:[function(e,t,n){var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":33}],61:[function(e,t,n){var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],62:[function(e,t,n){var r=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i,s=t.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))};s.store=r},{"./_global":25,"./_shared":53,"./_uid":61}],63:[function(e,t,n){var r=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},{"./_classof":11,"./_core":16,"./_iterators":38,"./_wks":62}],64:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":3,"./_iter-define":36,"./_iter-step":37,"./_iterators":38,"./_to-iobject":57}],65:[function(e,t,n){"use strict";var r=e("./_collection-strong");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},{"./_collection":15,"./_collection-strong":13}],66:[function(e,t,n){},{}],67:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":36,"./_string-at":54}],68:[function(e,t,n){var r=e("./_export");r(r.P+r.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":14,"./_export":22}],69:[function(e,t,n){e("./es6.array.iterator");for(var r=e("./_global"),o=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var u=s[c],l=r[u],f=l&&l.prototype;f&&!f[a]&&o(f,a,u),i[u]=i.Array}},{"./_global":25,"./_hide":27,"./_iterators":38,"./_wks":62,"./es6.array.iterator":64}],70:[function(t,n,r){(function(o){!function(t){if("object"==typeof r&&"undefined"!=typeof n)n.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.dolphin=t()}}(function(){return function e(n,r,o){function i(s,c){if(!r[s]){if(!n[s]){var u="function"==typeof t&&t;if(!c&&u)return u(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};n[s][0].call(f.exports,function(e){var t=n[s][1][e];return i(t?t:e)},f,f.exports,e,n,r,o)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/_core").Map},{"../modules/_core":18,"../modules/es6.map":72,"../modules/es6.object.to-string":73,"../modules/es6.string.iterator":76,"../modules/es7.map.to-json":77,"../modules/web.dom.iterable":79}],2:[function(e,t,n){"use strict";e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":18,"../modules/es6.object.to-string":73,"../modules/es6.promise":74,"../modules/es6.string.iterator":76,"../modules/web.dom.iterable":79}],3:[function(e,t,n){"use strict";e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),t.exports=e("../modules/_core").Set},{"../modules/_core":18,"../modules/es6.object.to-string":73,"../modules/es6.set":75,"../modules/es6.string.iterator":76,"../modules/es7.set.to-json":78,"../modules/web.dom.iterable":79}],4:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],5:[function(e,t,n){"use strict";t.exports=function(){}},{}],6:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},{}],7:[function(e,t,n){"use strict";var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":36}],8:[function(e,t,n){"use strict";var r=e("./_for-of");t.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},{"./_for-of":26}],9:[function(e,t,n){"use strict";var r=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if(s=c[l++],s!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},{"./_to-index":62,"./_to-iobject":64,"./_to-length":65}],10:[function(e,t,n){"use strict";var r=e("./_ctx"),o=e("./_iobject"),i=e("./_to-object"),a=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var _,y,v=i(t),m=o(v),b=r(s,p,3),g=a(m.length),w=0,k=n?h(t,g):c?h(t,0):void 0;g>w;w++)if((d||w in m)&&(_=m[w],y=b(_,w,v),e))if(n)k[w]=y;else if(y)switch(e){case 3:return!0;case 5:return _;case 6:return w;case 2:k.push(_)}else if(l)return!1;return f?-1:u||l?l:k}}},{"./_array-species-create":12,"./_ctx":19,"./_iobject":33,"./_to-length":65,"./_to-object":66}],11:[function(e,t,n){"use strict";var r=e("./_is-object"),o=e("./_is-array"),i=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&(t=t[i],null===t&&(t=void 0))),void 0===t?Array:t}},{"./_is-array":35,"./_is-object":36,"./_wks":69}],12:[function(e,t,n){"use strict";var r=e("./_array-species-constructor");t.exports=function(e,t){return new(r(e))(t)}},{"./_array-species-constructor":11}],13:[function(e,t,n){"use strict";var r=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};t.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":14,"./_wks":69}],14:[function(e,t,n){"use strict";var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],15:[function(e,t,n){"use strict";var r=e("./_object-dp").f,o=e("./_object-create"),i=e("./_redefine-all"),a=e("./_ctx"),s=e("./_an-instance"),c=e("./_defined"),u=e("./_for-of"),l=e("./_iter-define"),f=e("./_iter-step"),d=e("./_set-species"),h=e("./_descriptors"),p=e("./_meta").fastKey,_=h?"_s":"size",y=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};t.exports={getConstructor:function(e,t,n,l){var f=e(function(e,r){s(e,f,t,"_i"),e._i=o(null),e._f=void 0,e._l=void 0,e[_]=0,void 0!=r&&u(r,n,e[l],e)});return i(f.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[_]=0},"delete":function(e){var t=this,n=y(t,e);if(n){var r=n.n,o=n.p;delete t._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),t._f==n&&(t._f=r),t._l==n&&(t._l=o),t[_]--}return!!n},forEach:function(e){s(this,f,"forEach");for(var t,n=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),h&&r(f.prototype,"size",{get:function(){return c(this[_])}}),f},def:function(e,t,n){var r,o,i=y(e,t);return i?i.v=n:(e._l=i={i:o=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[_]++,"F"!==o&&(e._i[o]=i)),e},getEntry:y,setStrong:function(e,t,n){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),d(t)}}},{"./_an-instance":6,"./_ctx":19,"./_defined":20,"./_descriptors":21,"./_for-of":26,"./_iter-define":39,"./_iter-step":41,"./_meta":44,"./_object-create":46,"./_object-dp":47,"./_redefine-all":53,"./_set-species":55}],16:[function(e,t,n){"use strict";var r=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":8,"./_classof":13}],17:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_export"),i=e("./_meta"),a=e("./_fails"),s=e("./_hide"),c=e("./_redefine-all"),u=e("./_for-of"),l=e("./_an-instance"),f=e("./_is-object"),d=e("./_set-to-string-tag"),h=e("./_object-dp").f,p=e("./_array-methods")(0),_=e("./_descriptors");t.exports=function(e,t,n,y,v,m){var b=r[e],g=b,w=v?"set":"add",k=g&&g.prototype,C={};return _&&"function"==typeof g&&(m||k.forEach&&!a(function(){(new g).entries().next()}))?(g=t(function(t,n){l(t,g,e,"_c"),t._c=new b,void 0!=n&&u(n,v,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!m||"clear"!=e)&&s(g.prototype,e,function(n,r){if(l(this,g,e),!t&&m&&!f(n))return"get"==e&&void 0;var o=this._c[e](0===n?0:n,r);return t?this:o})}),"size"in k&&h(g.prototype,"size",{get:function(){return this._c.size}})):(g=y.getConstructor(t,e,v,w),c(g.prototype,n),i.NEED=!0),d(g,e),C[e]=g,o(o.G+o.W+o.F,C),m||y.setStrong(g,e,v),g}},{"./_an-instance":6,"./_array-methods":10,"./_descriptors":21,"./_export":24,"./_fails":25,"./_for-of":26,"./_global":27,"./_hide":29,"./_is-object":36,"./_meta":44,"./_object-dp":47,"./_redefine-all":53,"./_set-to-string-tag":56}],18:[function(e,t,n){"use strict";var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],19:[function(e,t,n){"use strict";var r=e("./_a-function");t.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":4}],20:[function(e,t,n){"use strict";t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],21:[function(e,t,n){"use strict";t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":25}],22:[function(e,t,n){"use strict";var r=e("./_is-object"),o=e("./_global").document,i=r(o)&&r(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":27,"./_is-object":36}],23:[function(e,t,n){"use strict";t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],24:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s="prototype",c=function u(e,t,n){var c,l,f,d=e&u.F,h=e&u.G,p=e&u.S,_=e&u.P,y=e&u.B,v=e&u.W,m=h?o:o[t]||(o[t]={}),b=m[s],g=h?r:p?r[t]:(r[t]||{})[s];h&&(n=t);for(c in n)l=!d&&g&&void 0!==g[c],l&&c in m||(f=l?g[c]:n[c],m[c]=h&&"function"!=typeof g[c]?n[c]:y&&l?i(f,r):v&&g[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):_&&"function"==typeof f?i(Function.call,f):f,_&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&a(b,c,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},{"./_core":18,"./_ctx":19,"./_global":27,"./_hide":29}],25:[function(e,t,n){"use strict";t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],26:[function(e,t,n){"use strict";var r=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),c=e("./core.get-iterator-method"),u={},l={},f=t.exports=function(e,t,n,f,d){var h,p,_,y,v=d?function(){return e}:c(e),m=r(n,f,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(i(v)){for(h=s(e.length);h>b;b++)if(y=t?m(a(p=e[b])[0],p[1]):m(e[b]),y===u||y===l)return y}else for(_=v.call(e);!(p=_.next()).done;)if(y=o(_,m,p.value,t),y===u||y===l)return y};f.BREAK=u,f.RETURN=l},{"./_an-object":7,"./_ctx":19,"./_is-array-iter":34,"./_iter-call":37,"./_to-length":65,"./core.get-iterator-method":70}],27:[function(e,t,n){"use strict";var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],28:[function(e,t,n){"use strict";var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],29:[function(e,t,n){"use strict";var r=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},{"./_descriptors":21,"./_object-dp":47,"./_property-desc":52}],30:[function(e,t,n){"use strict";t.exports=e("./_global").document&&document.documentElement},{"./_global":27}],31:[function(e,t,n){"use strict";t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":21,"./_dom-create":22,"./_fails":25}],32:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r=void 0===n;
switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},{}],33:[function(e,t,n){"use strict";var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":14}],34:[function(e,t,n){"use strict";var r=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},{"./_iterators":42,"./_wks":69}],35:[function(e,t,n){"use strict";var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":14}],36:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(e){return"object"===("undefined"==typeof e?"undefined":r(e))?null!==e:"function"==typeof e}},{}],37:[function(e,t,n){"use strict";var r=e("./_an-object");t.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(i){var a=e["return"];throw void 0!==a&&r(a.call(e)),i}}},{"./_an-object":7}],38:[function(e,t,n){"use strict";var r=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},{"./_hide":29,"./_object-create":46,"./_property-desc":52,"./_set-to-string-tag":56,"./_wks":69}],39:[function(e,t,n){"use strict";var r=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),c=e("./_iterators"),u=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",_="keys",y="values",v=function(){return this};t.exports=function(e,t,n,m,b,g,w){u(n,t,m);var k,C,P,M=function(e){if(!h&&e in O)return O[e];switch(e){case _:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},E=t+" Iterator",j=b==y,x=!1,O=e.prototype,A=O[d]||O[p]||b&&O[b],T=A||M(b),S=b?j?M("entries"):T:void 0,N="Array"==t?O.entries||A:A;if(N&&(P=f(N.call(new e)),P!==Object.prototype&&(l(P,E,!0),r||s(P,d)||a(P,d,v))),j&&A&&A.name!==y&&(x=!0,T=function(){return A.call(this)}),r&&!w||!h&&!x&&O[d]||a(O,d,T),c[t]=T,c[E]=v,b)if(k={values:j?T:M(y),keys:g?T:M(_),entries:S},w)for(C in k)C in O||i(O,C,k[C]);else o(o.P+o.F*(h||x),t,k);return k}},{"./_export":24,"./_has":28,"./_hide":29,"./_iter-create":38,"./_iterators":42,"./_library":43,"./_object-gpo":49,"./_redefine":54,"./_set-to-string-tag":56,"./_wks":69}],40:[function(e,t,n){"use strict";var r=e("./_wks")("iterator"),o=!1;try{var i=[7][r]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(s){}return n}},{"./_wks":69}],41:[function(e,t,n){"use strict";t.exports=function(e,t){return{value:t,done:!!e}}},{}],42:[function(e,t,n){"use strict";t.exports={}},{}],43:[function(e,t,n){"use strict";t.exports=!0},{}],44:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./_uid")("meta"),i=e("./_is-object"),a=e("./_has"),s=e("./_object-dp").f,c=0,u=Object.isExtensible||function(){return!0},l=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),f=function(e){s(e,o,{value:{i:"O"+ ++c,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==("undefined"==typeof e?"undefined":r(e))?e:("string"==typeof e?"S":"P")+e;if(!a(e,o)){if(!u(e))return"F";if(!t)return"E";f(e)}return e[o].i},h=function(e,t){if(!a(e,o)){if(!u(e))return!0;if(!t)return!1;f(e)}return e[o].w},p=function(e){return l&&_.NEED&&u(e)&&!a(e,o)&&f(e),e},_=t.exports={KEY:o,NEED:!1,fastKey:d,getWeak:h,onFreeze:p}},{"./_fails":25,"./_has":28,"./_is-object":36,"./_object-dp":47,"./_uid":68}],45:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_task").set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==e("./_cof")(a);t.exports=function(){var e,t,n,u=function(){var r,o;for(c&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(i){throw e?n():t=void 0,i}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(i){var l=!0,f=document.createTextNode("");new i(u).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(u)}}else n=function(){o.call(r,u)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},{"./_cof":14,"./_global":27,"./_task":61}],46:[function(e,t,n){"use strict";var r=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},c="prototype",u=function(){var t,n=e("./_dom-create")("iframe"),r=i.length,o="<",a=">";for(n.style.display="none",e("./_html").appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write(o+"script"+a+"document.F=Object"+o+"/script"+a),t.close(),u=t.F;r--;)delete u[c][i[r]];return u()};t.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=u(),void 0===t?n:o(n,t)}},{"./_an-object":7,"./_dom-create":22,"./_enum-bug-keys":23,"./_html":30,"./_object-dps":48,"./_shared-key":57}],47:[function(e,t,n){"use strict";var r=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;n.f=e("./_descriptors")?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},{"./_an-object":7,"./_descriptors":21,"./_ie8-dom-define":31,"./_to-primitive":67}],48:[function(e,t,n){"use strict";var r=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},{"./_an-object":7,"./_descriptors":21,"./_object-dp":47,"./_object-keys":51}],49:[function(e,t,n){"use strict";var r=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":28,"./_shared-key":57,"./_to-object":66}],50:[function(e,t,n){"use strict";var r=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},{"./_array-includes":9,"./_has":28,"./_shared-key":57,"./_to-iobject":64}],51:[function(e,t,n){"use strict";var r=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,o)}},{"./_enum-bug-keys":23,"./_object-keys-internal":50}],52:[function(e,t,n){"use strict";t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],53:[function(e,t,n){"use strict";var r=e("./_hide");t.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},{"./_hide":29}],54:[function(e,t,n){"use strict";t.exports=e("./_hide")},{"./_hide":29}],55:[function(e,t,n){"use strict";var r=e("./_global"),o=e("./_core"),i=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":18,"./_descriptors":21,"./_global":27,"./_object-dp":47,"./_wks":69}],56:[function(e,t,n){"use strict";var r=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},{"./_has":28,"./_object-dp":47,"./_wks":69}],57:[function(e,t,n){"use strict";var r=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return r[e]||(r[e]=o(e))}},{"./_shared":58,"./_uid":68}],58:[function(e,t,n){"use strict";var r=e("./_global"),o="__core-js_shared__",i=r[o]||(r[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":27}],59:[function(e,t,n){"use strict";var r=e("./_an-object"),o=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},{"./_a-function":4,"./_an-object":7,"./_wks":69}],60:[function(e,t,n){"use strict";var r=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):(i-55296<<10)+(a-56320)+65536)}}},{"./_defined":20,"./_to-integer":63}],61:[function(e,t,n){"use strict";var r,o,i,a=e("./_ctx"),s=e("./_invoke"),c=e("./_html"),u=e("./_dom-create"),l=e("./_global"),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,_=0,y={},v="onreadystatechange",m=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){m.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++_]=function(){s("function"==typeof e?e:Function(e),t)},r(_),_},h=function(e){delete y[e]},"process"==e("./_cof")(f)?r=function(e){f.nextTick(a(m,e,1))}:p?(o=new p,i=o.port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r=v in u("script")?function(e){c.appendChild(u("script"))[v]=function(){c.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),t.exports={set:d,clear:h}},{"./_cof":14,"./_ctx":19,"./_dom-create":22,"./_global":27,"./_html":30,"./_invoke":32}],62:[function(e,t,n){"use strict";var r=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":63}],63:[function(e,t,n){"use strict";var r=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},{}],64:[function(e,t,n){"use strict";var r=e("./_iobject"),o=e("./_defined");t.exports=function(e){return r(o(e))}},{"./_defined":20,"./_iobject":33}],65:[function(e,t,n){"use strict";var r=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(r(e),9007199254740991):0}},{"./_to-integer":63}],66:[function(e,t,n){"use strict";var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":20}],67:[function(e,t,n){"use strict";var r=e("./_is-object");t.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":36}],68:[function(e,t,n){"use strict";var r=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},{}],69:[function(e,t,n){"use strict";var r=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i,s=t.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))};s.store=r},{"./_global":27,"./_shared":58,"./_uid":68}],70:[function(e,t,n){"use strict";var r=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},{"./_classof":13,"./_core":18,"./_iterators":42,"./_wks":69}],71:[function(e,t,n){"use strict";var r=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":5,"./_iter-define":39,"./_iter-step":41,"./_iterators":42,"./_to-iobject":64}],72:[function(e,t,n){"use strict";var r=e("./_collection-strong");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},{"./_collection":17,"./_collection-strong":15}],73:[function(e,t,n){"use strict"},{}],74:[function(e,t,n){"use strict";var r,o,i,a=e("./_library"),s=e("./_global"),c=e("./_ctx"),u=e("./_classof"),l=e("./_export"),f=e("./_is-object"),d=e("./_a-function"),h=e("./_an-instance"),p=e("./_for-of"),_=e("./_species-constructor"),y=e("./_task").set,v=e("./_microtask")(),m="Promise",b=s.TypeError,g=s.process,w=s[m],g=s.process,k="process"==u(g),C=function(){},P=!!function(){try{var t=w.resolve(1),n=(t.constructor={})[e("./_wks")("species")]=function(e){e(C,C)};return(k||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof n}catch(r){}}(),M=function(e,t){return e===t||e===w&&t===i},E=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},j=function(e){return M(w,e)?new x(e):new o(e)},x=o=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},O=function(e){try{e()}catch(t){return{error:t}}},A=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var r=e._v,o=1==e._s,i=0,a=function(t){var n,i,a=o?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(o||(2==e._h&&N(e),e._h=1),a===!0?n=r:(u&&u.enter(),n=a(r),u&&u.exit()),n===t.promise?c(b("Promise-chain cycle")):(i=E(n))?i.call(n,s,c):s(n)):c(r)}catch(l){c(l)}};n.length>i;)a(n[i++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){y.call(s,function(){var t,n,r,o=e._v;if(S(e)&&(t=O(function(){k?g.emit("unhandledRejection",o,e):(n=s.onunhandledrejection)?n({promise:e,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=k||S(e)?2:1),e._a=void 0,t)throw t.error})},S=function R(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!R(t.promise))return!1;return!0},N=function(e){y.call(s,function(){var t;k?g.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),A(t,!0))},I=function B(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=E(e))?v(function(){var r={_w:n,_d:!1};try{t.call(e,c(B,r,1),c(D,r,1))}catch(o){D.call(r,o)}}):(n._v=e,n._s=1,A(n,!1))}catch(r){D.call({_w:n,_d:!1},r)}}};P||(w=function(e){h(this,w,m,"_h"),d(e),r.call(this);try{e(c(I,this,1),c(D,this,1))}catch(t){D.call(this,t)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=e("./_redefine-all")(w.prototype,{then:function(e,t){var n=j(_(this,w));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=k?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),x=function(){var e=new r;this.promise=e,this.resolve=c(I,e,1),this.reject=c(D,e,1)}),l(l.G+l.W+l.F*!P,{Promise:w}),e("./_set-to-string-tag")(w,m),e("./_set-species")(m),i=e("./_core")[m],l(l.S+l.F*!P,m,{reject:function(e){var t=j(this),n=t.reject;return n(e),t.promise}}),l(l.S+l.F*(a||!P),m,{resolve:function(e){if(e instanceof w&&M(e.constructor,this))return e;var t=j(this),n=t.resolve;return n(e),t.promise}}),l(l.S+l.F*!(P&&e("./_iter-detect")(function(e){w.all(e)["catch"](C)})),m,{all:function(e){var t=this,n=j(t),r=n.resolve,o=n.reject,i=O(function(){var n=[],i=0,a=1;p(e,!1,function(e){var s=i++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i&&o(i.error),n.promise},race:function(e){var t=this,n=j(t),r=n.reject,o=O(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},{"./_a-function":4,"./_an-instance":6,"./_classof":13,"./_core":18,"./_ctx":19,"./_export":24,"./_for-of":26,"./_global":27,"./_is-object":36,"./_iter-detect":40,"./_library":43,"./_microtask":45,"./_redefine-all":53,"./_set-species":55,"./_set-to-string-tag":56,"./_species-constructor":59,"./_task":61,"./_wks":69}],75:[function(e,t,n){"use strict";var r=e("./_collection-strong");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},{"./_collection":17,"./_collection-strong":15}],76:[function(e,t,n){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":39,"./_string-at":60}],77:[function(e,t,n){"use strict";var r=e("./_export");r(r.P+r.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":16,"./_export":24}],78:[function(e,t,n){"use strict";var r=e("./_export");r(r.P+r.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":16,"./_export":24}],79:[function(e,t,n){"use strict";e("./es6.array.iterator");for(var r=e("./_global"),o=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],c=0;c<5;c++){var u=s[c],l=r[u],f=l&&l.prototype;f&&!f[a]&&o(f,a,u),i[u]=i.Array}},{"./_global":27,"./_hide":29,"./_iterators":42,"./_wks":69,"./es6.array.iterator":71}],80:[function(e,t,n){function r(e){if(e)return o(e)}function o(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],81:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function i(){r(this,i)};o.QUALIFIER_PROPERTY="qualifier",o.VALUE="value",Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],82:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Command"),s=function(e){function t(e,n,i){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.attributeId=e,a.metadataName=n,a.value=i,a.id="ChangeAttributeMetadata",a.className="org.opendolphin.core.comm.ChangeAttributeMetadataCommand",a}return i(t,e),t}(a["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./Command":89}],83:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./EventBus"),s=function(){function e(t,n,o){r(this,e),this.propertyName=t,this.id=""+e.clientAttributeInstanceCount++ +"C",this.valueChangeBus=new a["default"],this.qualifierChangeBus=new a["default"],this.setValue(o),this.setQualifier(n)}return i(e,[{key:"copy",value:function(){var t=new e(this.propertyName,this.getQualifier(),this.getValue());return t}},{key:"setPresentationModel",value:function(e){this.presentationModel&&alert("You can not set a presentation model for an attribute that is already bound."),this.presentationModel=e}},{key:"getPresentationModel",value:function(){return this.presentationModel}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(t){var n=e.checkValue(t);if(this.value!=n){var r=this.value;this.value=n,this.valueChangeBus.trigger({oldValue:r,newValue:n})}}},{key:"setQualifier",value:function(e){if(this.qualifier!=e){var t=this.qualifier;this.qualifier=e,this.qualifierChangeBus.trigger({oldValue:t,newValue:e})}}},{key:"getQualifier",value:function(){return this.qualifier}},{key:"onValueChange",value:function(e){this.valueChangeBus.onEvent(e),e({oldValue:this.value,newValue:this.value})}},{key:"onQualifierChange",value:function(e){this.qualifierChangeBus.onEvent(e)}},{key:"syncWith",value:function(e){e&&(this.setQualifier(e.getQualifier()),this.setValue(e.value))}}],[{key:"checkValue",value:function(t){if(null==t||void 0==t)return null;var n=t;(n instanceof String||n instanceof Boolean||n instanceof Number)&&(n=t.valueOf()),n instanceof e&&(console.log("An Attribute may not itself contain an attribute as a value. Assuming you forgot to call value."),n=this.checkValue(t.value));var r=!1;if((this.SUPPORTED_VALUE_TYPES.indexOf("undefined"==typeof n?"undefined":o(n))>-1||n instanceof Date)&&(r=!0),!r)throw new Error("Attribute values of this type are not allowed: "+("undefined"==typeof t?"undefined":o(t)));return n}}]),e}();s.SUPPORTED_VALUE_TYPES=["string","number","boolean"],s.clientAttributeInstanceCount=0,n.ClientAttribute=s},{"./EventBus":95}],84:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./ClientPresentationModel"),a=e("./Codec"),s=e("./CommandBatcher"),c=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;r(this,e),this.commandQueue=[],this.currentlySending=!1,this.pushEnabled=!1,this.waiting=!1,this.transmitter=t,this.clientDolphin=n,this.slackMS=o,this.codec=new a["default"],this.commandBatcher=new s.BlindCommandBatcher((!0),i)}return o(e,[{key:"setCommandBatcher",value:function(e){this.commandBatcher=e}},{key:"setPushEnabled",value:function(e){this.pushEnabled=e}},{key:"setPushListener",value:function(e){this.pushListener=e}},{key:"setReleaseCommand",value:function(e){this.releaseCommand=e}},{key:"send",value:function(e,t){return this.commandQueue.push({command:e,handler:t}),this.currentlySending?void this.release():void this.doSendNext()}},{key:"doSendNext",value:function(){var e=this;if(this.commandQueue.length<1){if(!this.pushEnabled)return void(this.currentlySending=!1);this.enqueuePushCommand()}this.currentlySending=!0;var t=this.commandBatcher.batch(this.commandQueue),n=t[t.length-1].handler,r=t.map(function(e){return e.command});this.transmitter.transmit(r,function(t){var r=[];t.forEach(function(t){var n=e.handle(t);n&&r.push(n)}),n&&n.onFinished(r),setTimeout(function(){return e.doSendNext()},e.slackMS)})}},{key:"handle",value:function(e){return"DeletePresentationModel"==e.id?this.handleDeletePresentationModelCommand(e):"CreatePresentationModel"==e.id?this.handleCreatePresentationModelCommand(e):"ValueChanged"==e.id?this.handleValueChangedCommand(e):"AttributeMetadataChanged"==e.id?this.handleAttributeMetadataChangedCommand(e):(console.log("Cannot handle, unknown command "+e),null)}},{key:"handleDeletePresentationModelCommand",value:function(e){var t=this.clientDolphin.findPresentationModelById(e.pmId);return t?(this.clientDolphin.getClientModelStore().deletePresentationModel(t,!0),t):null}},{key:"handleCreatePresentationModelCommand",value:function(e){var t=this;if(this.clientDolphin.getClientModelStore().containsPresentationModel(e.pmId))throw new Error("There already is a presentation model with id "+e.pmId+"  known to the client.");var n=[];e.attributes.forEach(function(e){var r=t.clientDolphin.attribute(e.propertyName,e.qualifier,e.value);e.id&&e.id.match(".*S$")&&(r.id=e.id),n.push(r)});var r=new i.ClientPresentationModel(e.pmId,e.pmType);return r.addAttributes(n),e.clientSideOnly&&(r.clientSideOnly=!0),this.clientDolphin.getClientModelStore().add(r),this.clientDolphin.updatePresentationModelQualifier(r),r}},{key:"handleValueChangedCommand",value:function(e){var t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?t.getValue()==e.newValue?null:(t.setValue(e.newValue),null):(console.log("attribute with id "+e.attributeId+" not found, cannot update to new value "+e.newValue),null)}},{key:"handleAttributeMetadataChangedCommand",value:function(e){var t=this.clientDolphin.getClientModelStore().findAttributeById(e.attributeId);return t?(t[e.metadataName]=e.value,null):null}},{key:"listen",value:function(){this.pushEnabled&&(this.waiting||this.currentlySending||this.doSendNext())}},{key:"enqueuePushCommand",value:function(){var e=this;this.waiting=!0,this.commandQueue.push({command:this.pushListener,handler:{onFinished:function(){e.waiting=!1},onFinishedData:null}})}},{key:"release",value:function(){this.waiting&&(this.waiting=!1,this.transmitter.signal(this.releaseCommand))}}]),e}();n.ClientConnector=c},{"./ClientPresentationModel":87,"./Codec":88,"./CommandBatcher":90}],85:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./ClientAttribute"),a=e("./ClientPresentationModel"),s=function(){function e(){r(this,e)}return o(e,[{key:"setClientConnector",value:function(e){this.clientConnector=e}},{key:"getClientConnector",value:function(){return this.clientConnector}},{key:"send",value:function(e,t){this.clientConnector.send(e,t)}},{key:"attribute",value:function(e,t,n){return new i.ClientAttribute(e,t,n)}},{key:"presentationModel",value:function(e,t){for(var n=new a.ClientPresentationModel(e,t),r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return o&&o.length>0&&o.forEach(function(e){n.addAttribute(e)}),this.getClientModelStore().add(n),n}},{key:"setClientModelStore",value:function(e){this.clientModelStore=e}},{key:"getClientModelStore",value:function(){return this.clientModelStore}},{key:"listPresentationModelIds",value:function(){return this.getClientModelStore().listPresentationModelIds()}},{key:"listPresentationModels",value:function(){return this.getClientModelStore().listPresentationModels()}},{key:"findAllPresentationModelByType",value:function(e){return this.getClientModelStore().findAllPresentationModelByType(e)}},{key:"getAt",value:function(e){return this.findPresentationModelById(e)}},{key:"findPresentationModelById",value:function(e){return this.getClientModelStore().findPresentationModelById(e)}},{key:"deletePresentationModel",value:function(e){this.getClientModelStore().deletePresentationModel(e,!0)}},{key:"updatePresentationModelQualifier",value:function(e){var t=this;e.getAttributes().forEach(function(e){t.updateAttributeQualifier(e)})}},{key:"updateAttributeQualifier",value:function(e){if(e.getQualifier()){var t=this.getClientModelStore().findAllAttributesByQualifier(e.getQualifier());t.forEach(function(t){t.setValue(e.getValue())})}}},{key:"startPushListening",value:function(e,t){this.clientConnector.setPushListener(e),this.clientConnector.setReleaseCommand(t),this.clientConnector.setPushEnabled(!0),this.clientConnector.listen()}},{key:"stopPushListening",value:function(){this.clientConnector.setPushEnabled(!1)}}]),e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./ClientAttribute":83,"./ClientPresentationModel":87}],86:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./Attribute"),a=e("./ChangeAttributeMetadataCommand"),s=e("./CreatePresentationModelCommand"),c=e("./DeletedPresentationModelNotification"),u=e("./EventBus"),l=e("./ValueChangedCommand");!function(e){e[e.ADDED="ADDED"]="ADDED",e[e.REMOVED="REMOVED"]="REMOVED"}(n.Type||(n.Type={}));var f=n.Type,d=function(){function e(t){r(this,e),this.clientDolphin=t,this.presentationModels=new Map,this.presentationModelsPerType=new Map,this.attributesPerId=new Map,this.attributesPerQualifier=new Map,this.modelStoreChangeBus=new u["default"]}return o(e,[{key:"getClientDolphin",value:function(){return this.clientDolphin}},{key:"registerModel",value:function(e){var t=this;if(!e.clientSideOnly){var n=this.clientDolphin.getClientConnector(),r=new s["default"](e);n.send(r,null),e.getAttributes().forEach(function(e){t.registerAttribute(e)})}}},{key:"registerAttribute",value:function(e){var t=this;this.addAttributeById(e),e.getQualifier()&&this.addAttributeByQualifier(e),e.onValueChange(function(n){var r=new l["default"](e.id,n.newValue);if(t.clientDolphin.getClientConnector().send(r,null),e.getQualifier()){var o=t.findAttributesByFilter(function(t){return t!==e&&t.getQualifier()==e.getQualifier()});o.forEach(function(t){t.setValue(e.getValue())})}}),e.onQualifierChange(function(n){var r=new a["default"](e.id,i["default"].QUALIFIER_PROPERTY,n.newValue);t.clientDolphin.getClientConnector().send(r,null)})}},{key:"add",value:function(e){if(!e)return!1;this.presentationModels.has(e.id)&&console.log("There already is a PM with id "+e.id);var t=!1;return this.presentationModels.has(e.id)||(this.presentationModels.set(e.id,e),this.addPresentationModelByType(e),this.registerModel(e),
this.modelStoreChangeBus.trigger({eventType:f.ADDED,clientPresentationModel:e}),t=!0),t}},{key:"remove",value:function(e){var t=this;if(!e)return!1;var n=!1;return this.presentationModels.has(e.id)&&(this.removePresentationModelByType(e),this.presentationModels["delete"](e.id),e.getAttributes().forEach(function(e){t.removeAttributeById(e),e.getQualifier()&&t.removeAttributeByQualifier(e)}),this.modelStoreChangeBus.trigger({eventType:f.REMOVED,clientPresentationModel:e}),n=!0),n}},{key:"findAttributesByFilter",value:function(e){var t=[];return this.presentationModels.forEach(function(n){n.getAttributes().forEach(function(n){e(n)&&t.push(n)})}),t}},{key:"addPresentationModelByType",value:function(e){if(e){var t=e.presentationModelType;if(t){var n=this.presentationModelsPerType.get(t);n||(n=[],this.presentationModelsPerType.set(t,n)),n.indexOf(e)>-1||n.push(e)}}}},{key:"removePresentationModelByType",value:function(e){if(e&&e.presentationModelType){var t=this.presentationModelsPerType.get(e.presentationModelType);t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.presentationModelsPerType["delete"](e.presentationModelType))}}},{key:"listPresentationModelIds",value:function(){for(var e=[],t=this.presentationModels.keys(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}},{key:"listPresentationModels",value:function(){for(var e=[],t=this.presentationModels.values(),n=t.next();!n.done;)e.push(n.value),n=t.next();return e}},{key:"findPresentationModelById",value:function(e){return this.presentationModels.get(e)}},{key:"findAllPresentationModelByType",value:function(e){return e&&this.presentationModelsPerType.has(e)?this.presentationModelsPerType.get(e).slice(0):[]}},{key:"deletePresentationModel",value:function(e,t){if(e&&this.containsPresentationModel(e.id)){if(this.remove(e),!t||e.clientSideOnly)return;this.clientDolphin.getClientConnector().send(new c["default"](e.id),null)}}},{key:"containsPresentationModel",value:function(e){return this.presentationModels.has(e)}},{key:"addAttributeById",value:function(e){e&&!this.attributesPerId.has(e.id)&&this.attributesPerId.set(e.id,e)}},{key:"removeAttributeById",value:function(e){e&&this.attributesPerId.has(e.id)&&this.attributesPerId["delete"](e.id)}},{key:"findAttributeById",value:function(e){return this.attributesPerId.get(e)}},{key:"addAttributeByQualifier",value:function(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t||(t=[],this.attributesPerQualifier.set(e.getQualifier(),t)),t.indexOf(e)>-1||t.push(e)}}},{key:"removeAttributeByQualifier",value:function(e){if(e&&e.getQualifier()){var t=this.attributesPerQualifier.get(e.getQualifier());t&&(t.length>-1&&t.splice(t.indexOf(e),1),0===t.length&&this.attributesPerQualifier["delete"](e.getQualifier()))}}},{key:"findAllAttributesByQualifier",value:function(e){return e&&this.attributesPerQualifier.has(e)?this.attributesPerQualifier.get(e).slice(0):[]}},{key:"onModelStoreChange",value:function(e){this.modelStoreChangeBus.onEvent(e)}},{key:"onModelStoreChangeForType",value:function(e,t){this.modelStoreChangeBus.onEvent(function(n){n.clientPresentationModel.presentationModelType==e&&t(n)})}}]),e}();n.ClientModelStore=d},{"./Attribute":81,"./ChangeAttributeMetadataCommand":82,"./CreatePresentationModelCommand":92,"./DeletedPresentationModelNotification":93,"./EventBus":95,"./ValueChangedCommand":102}],87:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./EventBus"),a=0,s=function(){function e(t,n){r(this,e),this.id=t,this.presentationModelType=n,this.attributes=[],this.clientSideOnly=!1,this.dirty=!1,"undefined"!=typeof t&&null!=t?this.id=t:this.id=(a++).toString(),this.invalidBus=new i["default"],this.dirtyValueChangeBus=new i["default"]}return o(e,[{key:"copy",value:function(){var t=new e(null,this.presentationModelType);return t.clientSideOnly=!0,this.getAttributes().forEach(function(e){var n=e.copy();t.addAttribute(n)}),t}},{key:"addAttributes",value:function(e){var t=this;!e||e.length<1||e.forEach(function(e){t.addAttribute(e)})}},{key:"addAttribute",value:function(e){var t=this;if(e&&!(this.attributes.indexOf(e)>-1)){if(this.findAttributeByPropertyName(e.propertyName))throw new Error("There already is an attribute with property name: "+e.propertyName+" in presentation model with id: "+this.id);if(e.getQualifier()&&this.findAttributeByQualifier(e.getQualifier()))throw new Error("There already is an attribute with qualifier: "+e.getQualifier()+" in presentation model with id: "+this.id);e.setPresentationModel(this),this.attributes.push(e),e.onValueChange(function(){t.invalidBus.trigger({source:t})})}}},{key:"onInvalidated",value:function(e){this.invalidBus.onEvent(e)}},{key:"getAttributes",value:function(){return this.attributes.slice(0)}},{key:"getAt",value:function(e){return this.findAttributeByPropertyName(e)}},{key:"findAllAttributesByPropertyName",value:function(e){var t=[];return e?(this.attributes.forEach(function(n){n.propertyName==e&&t.push(n)}),t):null}},{key:"findAttributeByPropertyName",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].propertyName==e)return this.attributes[t];return null}},{key:"findAttributeByQualifier",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].getQualifier()==e)return this.attributes[t];return null}},{key:"findAttributeById",value:function(e){if(!e)return null;for(var t=0;t<this.attributes.length;t++)if(this.attributes[t].id==e)return this.attributes[t];return null}},{key:"syncWith",value:function(e){this.attributes.forEach(function(t){var n=e.getAt(t.propertyName);n&&t.syncWith(n)})}}]),e}();n.ClientPresentationModel=s},{"./EventBus":95}],88:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./utils.js"),a=function(){function e(){r(this,e)}return o(e,null,[{key:"encodeCreatePresentationModelCommand",value:function(e){return{p:e.pmId,t:e.pmType,a:e.attributes.map(function(e){var t={n:e.propertyName,i:e.id};return(0,i.exists)(e.value)&&(t.v=e.value),t}),id:"CreatePresentationModel"}}},{key:"decodeCreatePresentationModelCommand",value:function(e){return{id:"CreatePresentationModel",className:"org.opendolphin.core.comm.CreatePresentationModelCommand",clientSideOnly:!1,pmId:e.p,pmType:e.t,attributes:e.a.map(function(e){return{propertyName:e.n,id:e.i,value:(0,i.exists)(e.v)?e.v:null,qualifier:null}})}}},{key:"encodeValueChangedCommand",value:function(e){var t={a:e.attributeId};return(0,i.exists)(e.oldValue)&&(t.o=e.oldValue),(0,i.exists)(e.newValue)&&(t.n=e.newValue),t.id="ValueChanged",t}},{key:"decodeValueChangedCommand",value:function(e){return{id:"ValueChanged",className:"org.opendolphin.core.comm.ValueChangedCommand",attributeId:e.a,oldValue:(0,i.exists)(e.o)?e.o:null,newValue:(0,i.exists)(e.n)?e.n:null}}},{key:"encode",value:function(e){var t=this;return JSON.stringify(e.map(function(e){return"CreatePresentationModel"===e.id?t.encodeCreatePresentationModelCommand(e):"ValueChanged"===e.id?t.encodeValueChangedCommand(e):e}))}},{key:"decode",value:function(e){var t=this;return"string"==typeof e?JSON.parse(e).map(function(e){return"CreatePresentationModel"===e.id?t.decodeCreatePresentationModelCommand(e):"ValueChanged"===e.id?t.decodeValueChangedCommand(e):e}):e}}]),e}();n["default"]=a},{"./utils.js":121}],89:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function i(){r(this,i),this.id="dolphin-core-command"};Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],90:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./ValueChangedCommand"),a=function(){function e(){r(this,e)}return o(e,[{key:"batch",value:function(e){return[e.shift()]}}]),e}();n.NoCommandBatcher=a;var s=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;r(this,e),this.folding=t,this.maxBatchSize=n}return o(e,[{key:"batch",value:function t(e){for(var t=[],n=Math.min(e.length,this.maxBatchSize),r=0;r<n;r++){var o=e.shift();if(this.folding&&o.command instanceof i["default"]&&!o.handler){var a=o.command;if(t.length>0&&t[t.length-1].command instanceof i["default"]){var s=t[t.length-1].command;a.attributeId==s.attributeId?s.newValue=a.newValue:t.push(o)}else t.push(o)}else t.push(o);if(o.handler||"org.opendolphin.core.comm.EmptyNotification"==o.command.className)break}return t}}]),e}();n.BlindCommandBatcher=s},{"./ValueChangedCommand":102}],91:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function i(){r(this,i)};o.DOLPHIN_PLATFORM_PREFIX="dolphin_platform_intern_",o.CREATE_CONTEXT_COMMAND_NAME=o.DOLPHIN_PLATFORM_PREFIX+"initClientContext",o.DESTROY_CONTEXT_COMMAND_NAME=o.DOLPHIN_PLATFORM_PREFIX+"disconnectClientContext",o.CREATE_CONTROLLER_COMMAND_NAME=o.DOLPHIN_PLATFORM_PREFIX+"registerController",o.DESTROY_CONTROLLER_COMMAND_NAME=o.DOLPHIN_PLATFORM_PREFIX+"destroyController",o.CALL_CONTROLLER_ACTION_COMMAND_NAME=o.DOLPHIN_PLATFORM_PREFIX+"callControllerAction",o.START_LONG_POLL_COMMAND_NAME=o.DOLPHIN_PLATFORM_PREFIX+"longPoll",o.INTERRUPT_LONG_POLL_COMMAND_NAME=o.DOLPHIN_PLATFORM_PREFIX+"release",Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=o},{}],92:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Command"),s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.attributes=[],n.clientSideOnly=!1,n.id="CreatePresentationModel",n.className="org.opendolphin.core.comm.CreatePresentationModelCommand",n.pmId=e.id,n.pmType=e.presentationModelType;var i=n.attributes;return e.getAttributes().forEach(function(e){i.push({propertyName:e.propertyName,id:e.id,qualifier:e.getQualifier(),value:e.getValue()})}),n}return i(t,e),t}(a["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./Command":89}],93:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Command"),s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.pmId=e,n.id="DeletedPresentationModel",n.className="org.opendolphin.core.comm.DeletedPresentationModelNotification",n}return i(t,e),t}(a["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./Command":89}],94:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./ClientConnector"),a=e("./ClientDolphin"),s=e("./ClientModelStore"),c=e("./HttpTransmitter"),u=e("./NoTransmitter"),l=function(){function e(){r(this,e),this.reset_=!1,this.slackMS_=300,this.maxBatchSize_=50,this.supportCORS_=!1}return o(e,[{key:"url",value:function(e){return this.url_=e,this}},{key:"reset",value:function(e){return this.reset_=e,this}},{key:"slackMS",value:function(e){return this.slackMS_=e,this}},{key:"maxBatchSize",value:function(e){return this.maxBatchSize_=e,this}},{key:"supportCORS",value:function(e){return this.supportCORS_=e,this}},{key:"errorHandler",value:function(e){return this.errorHandler_=e,this}},{key:"headersInfo",value:function(e){return this.headersInfo_=e,this}},{key:"build",value:function(){console.log("OpenDolphin js found");var e,t=new a["default"];return e=null!=this.url_&&this.url_.length>0?new c["default"](this.url_,this.reset_,"UTF-8",this.errorHandler_,this.supportCORS_,this.headersInfo_):new u["default"],t.setClientConnector(new i.ClientConnector(e,t,this.slackMS_,this.maxBatchSize_)),t.setClientModelStore(new s.ClientModelStore(t)),console.log("ClientDolphin initialized"),t}}]),e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=l},{"./ClientConnector":84,"./ClientDolphin":85,"./ClientModelStore":86,"./HttpTransmitter":96,"./NoTransmitter":98}],95:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e),this.eventHandlers=[]}return o(e,[{key:"onEvent",value:function(e){this.eventHandlers.push(e)}},{key:"trigger",value:function(e){this.eventHandlers.forEach(function(t){return t(e)})}}]),e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{}],96:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./Codec"),a=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"UTF-8",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;r(this,e),this.url=t,this.charset=o,this.HttpCodes={finished:4,success:200},this.errorHandler=a,this.supportCORS=s,this.headersInfo=c,this.http=new XMLHttpRequest,this.sig=new XMLHttpRequest,this.supportCORS&&"withCredentials"in this.http&&(this.http.withCredentials=!0,this.sig.withCredentials=!0),this.codec=new i["default"],n&&(console.log("HttpTransmitter.invalidate() is deprecated. Use ClientDolphin.reset(OnSuccessHandler) instead"),this.invalidate())}return o(e,[{key:"transmit",value:function(e,t){var n=this;this.http.onerror=function(){n.handleError("onerror",""),t([])},this.http.onreadystatechange=function(){if(n.http.readyState==n.HttpCodes.finished)if(n.http.status==n.HttpCodes.success){var e=n.http.responseText;if(e.trim().length>0)try{var r=n.codec.decode(e);t(r)}catch(o){console.log("Error occurred parsing responseText: ",o),console.log("Incorrect responseText: ",e),n.handleError("application","HttpTransmitter: Incorrect responseText: "+e),t([])}else n.handleError("application","HttpTransmitter: empty responseText"),t([])}else n.handleError("application","HttpTransmitter: HTTP Status != 200"),t([])},this.http.open("POST",this.url,!0),this.setHeaders(this.http),"overrideMimeType"in this.http&&this.http.overrideMimeType("application/json; charset="+this.charset),this.http.send(this.codec.encode(e))}},{key:"setHeaders",value:function(e){if(this.headersInfo)for(var t in this.headersInfo)this.headersInfo.hasOwnProperty(t)&&e.setRequestHeader(t,this.headersInfo[t])}},{key:"handleError",value:function(e,t){var n={kind:e,url:this.url,httpStatus:this.http.status,message:t};this.errorHandler?this.errorHandler(n):console.log("Error occurred: ",n)}},{key:"signal",value:function(e){this.sig.open("POST",this.url,!0),this.setHeaders(this.sig),this.sig.send(this.codec.encode([e]))}},{key:"invalidate",value:function(){this.http.open("POST",this.url+"invalidate?",!1),this.http.send()}}]),e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=a},{"./Codec":88}],97:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./SignalCommand"),s=e("./CommandConstants"),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s["default"].INTERRUPT_LONG_POLL_COMMAND_NAME));return e.className="com.canoo.dolphin.impl.commands.InterruptLongPollCommand",e}return i(t,e),t}(a["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=c},{"./CommandConstants":91,"./SignalCommand":100}],98:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"transmit",value:function(e,t){t([])}},{key:"signal",value:function(){}},{key:"reset",value:function(){}}]),e}();Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i},{}],99:[function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300;return o().url(e).reset(t).slackMS(n).build()}function o(){return new s["default"]}function i(){return new c["default"]}function a(){return new u["default"]}var s=e("./DolphinBuilder"),c=e("./InterruptLongPollCommand"),u=e("./StartLongPollCommand");n.dolphin=r,n.makeDolphin=o,n.createInterruptLongPollCommand=i,n.createStartLongPollCommand=a},{"./DolphinBuilder":94,"./InterruptLongPollCommand":97,"./StartLongPollCommand":101}],100:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Command"),s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.id=e,n.className="org.opendolphin.core.comm.SignalCommand",n}return i(t,e),t}(a["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./Command":89}],101:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Command"),s=e("./CommandConstants"),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.id=s["default"].START_LONG_POLL_COMMAND_NAME,e.className="com.canoo.dolphin.impl.commands.StartLongPollCommand",e}return i(t,e),t}(a["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=c},{"./Command":89,"./CommandConstants":91}],102:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=e("./Command"),s=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.attributeId=e,i.newValue=n,i.id="ValueChanged",i.className="org.opendolphin.core.comm.ValueChangedCommand",i}return i(t,e),t}(a["default"]);Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s},{"./Command":89}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../bower_components/core.js/library/fn/map"),s=r(a),c=e("./utils.js"),u=e("./utils"),l=function(){function e(t){o(this,e),(0,u.checkMethod)("BeanManager(classRepository)"),(0,u.checkParam)(t,"classRepository"),this.classRepository=t,this.addedHandlers=new s["default"],this.removedHandlers=new s["default"],this.updatedHandlers=new s["default"],this.arrayUpdatedHandlers=new s["default"],this.allAddedHandlers=[],this.allRemovedHandlers=[],this.allUpdatedHandlers=[],this.allArrayUpdatedHandlers=[];var n=this;this.classRepository.onBeanAdded(function(e,t){var r=n.addedHandlers.get(e);(0,c.exists)(r)&&r.forEach(function(n){try{n(t)}catch(r){console.warn("An exception occurred while calling an onBeanAdded-handler for type",e,r)}}),n.allAddedHandlers.forEach(function(e){try{e(t)}catch(n){console.warn("An exception occurred while calling a general onBeanAdded-handler",n)}})}),this.classRepository.onBeanRemoved(function(e,t){var r=n.removedHandlers.get(e);(0,c.exists)(r)&&r.forEach(function(n){try{n(t)}catch(r){console.warn("An exception occurred while calling an onBeanRemoved-handler for type",e,r)}}),n.allRemovedHandlers.forEach(function(e){try{e(t)}catch(n){console.warn("An exception occurred while calling a general onBeanRemoved-handler",n)}})}),this.classRepository.onBeanUpdate(function(e,t,r,o,i){var a=n.updatedHandlers.get(e);(0,c.exists)(a)&&a.forEach(function(n){try{n(t,r,o,i)}catch(a){console.warn("An exception occurred while calling an onBeanUpdate-handler for type",e,a)}}),n.allUpdatedHandlers.forEach(function(e){try{e(t,r,o,i)}catch(n){console.warn("An exception occurred while calling a general onBeanUpdate-handler",n)}})}),this.classRepository.onArrayUpdate(function(e,t,r,o,i,a){var s=n.arrayUpdatedHandlers.get(e);(0,c.exists)(s)&&s.forEach(function(n){try{n(t,r,o,i,a)}catch(s){console.warn("An exception occurred while calling an onArrayUpdate-handler for type",e,s)}}),n.allArrayUpdatedHandlers.forEach(function(e){try{e(t,r,o,i,a)}catch(n){console.warn("An exception occurred while calling a general onArrayUpdate-handler",n)}})})}return i(e,[{key:"notifyBeanChange",value:function(e,t,n){return(0,u.checkMethod)("BeanManager.notifyBeanChange(bean, propertyName, newValue)"),(0,u.checkParam)(e,"bean"),(0,u.checkParam)(t,"propertyName"),this.classRepository.notifyBeanChange(e,t,n)}},{key:"notifyArrayChange",value:function(e,t,n,r,o){(0,u.checkMethod)("BeanManager.notifyArrayChange(bean, propertyName, index, count, removedElements)"),(0,u.checkParam)(e,"bean"),(0,u.checkParam)(t,"propertyName"),(0,u.checkParam)(n,"index"),(0,u.checkParam)(r,"count"),(0,u.checkParam)(o,"removedElements"),this.classRepository.notifyArrayChange(e,t,n,r,o)}},{key:"isManaged",value:function(e){throw(0,u.checkMethod)("BeanManager.isManaged(bean)"),(0,u.checkParam)(e,"bean"),new Error("Not implemented yet")}},{key:"create",value:function(e){throw(0,u.checkMethod)("BeanManager.create(type)"),(0,u.checkParam)(e,"type"),new Error("Not implemented yet")}},{key:"add",value:function(e,t){throw(0,u.checkMethod)("BeanManager.add(type, bean)"),(0,u.checkParam)(e,"type"),(0,u.checkParam)(t,"bean"),new Error("Not implemented yet")}},{key:"addAll",value:function(e,t){throw(0,u.checkMethod)("BeanManager.addAll(type, collection)"),(0,u.checkParam)(e,"type"),(0,u.checkParam)(t,"collection"),new Error("Not implemented yet")}},{key:"remove",value:function(e){throw(0,u.checkMethod)("BeanManager.remove(bean)"),(0,u.checkParam)(e,"bean"),new Error("Not implemented yet")}},{key:"removeAll",value:function(e){throw(0,u.checkMethod)("BeanManager.removeAll(collection)"),(0,u.checkParam)(e,"collection"),new Error("Not implemented yet")}},{key:"removeIf",value:function(e){throw(0,u.checkMethod)("BeanManager.removeIf(predicate)"),(0,u.checkParam)(e,"predicate"),new Error("Not implemented yet")}},{key:"onAdded",value:function(e,t){var n=this;if((0,c.exists)(t)){(0,u.checkMethod)("BeanManager.onAdded(type, eventHandler)"),(0,u.checkParam)(e,"type"),(0,u.checkParam)(t,"eventHandler");var r=n.addedHandlers.get(e);return(0,c.exists)(r)||(r=[]),n.addedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.addedHandlers.get(e);(0,c.exists)(r)&&n.addedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,u.checkMethod)("BeanManager.onAdded(eventHandler)"),(0,u.checkParam)(t,"eventHandler"),n.allAddedHandlers=n.allAddedHandlers.concat(t),{unsubscribe:function(){n.allAddedHandlers=n.allAddedHandlers.filter(function(e){return e!==t})}}}},{key:"onRemoved",value:function(e,t){var n=this;if((0,c.exists)(t)){(0,u.checkMethod)("BeanManager.onRemoved(type, eventHandler)"),(0,u.checkParam)(e,"type"),(0,u.checkParam)(t,"eventHandler");var r=n.removedHandlers.get(e);return(0,c.exists)(r)||(r=[]),n.removedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.removedHandlers.get(e);(0,c.exists)(r)&&n.removedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,u.checkMethod)("BeanManager.onRemoved(eventHandler)"),(0,u.checkParam)(t,"eventHandler"),n.allRemovedHandlers=n.allRemovedHandlers.concat(t),{unsubscribe:function(){n.allRemovedHandlers=n.allRemovedHandlers.filter(function(e){return e!==t})}}}},{key:"onBeanUpdate",value:function(e,t){var n=this;if((0,c.exists)(t)){(0,u.checkMethod)("BeanManager.onBeanUpdate(type, eventHandler)"),(0,u.checkParam)(e,"type"),(0,u.checkParam)(t,"eventHandler");var r=n.updatedHandlers.get(e);return(0,c.exists)(r)||(r=[]),n.updatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.updatedHandlers.get(e);(0,c.exists)(r)&&n.updatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,u.checkMethod)("BeanManager.onBeanUpdate(eventHandler)"),(0,u.checkParam)(t,"eventHandler"),n.allUpdatedHandlers=n.allUpdatedHandlers.concat(t),{unsubscribe:function(){n.allUpdatedHandlers=n.allUpdatedHandlers.filter(function(e){return e!==t})}}}},{key:"onArrayUpdate",value:function(e,t){var n=this;if((0,c.exists)(t)){(0,u.checkMethod)("BeanManager.onArrayUpdate(type, eventHandler)"),(0,u.checkParam)(e,"type"),(0,u.checkParam)(t,"eventHandler");var r=n.arrayUpdatedHandlers.get(e);return(0,c.exists)(r)||(r=[]),n.arrayUpdatedHandlers.set(e,r.concat(t)),{unsubscribe:function(){var r=n.arrayUpdatedHandlers.get(e);(0,c.exists)(r)&&n.arrayUpdatedHandlers.set(e,r.filter(function(e){return e!==t}))}}}return t=e,(0,u.checkMethod)("BeanManager.onArrayUpdate(eventHandler)"),(0,u.checkParam)(t,"eventHandler"),n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.concat(t),{unsubscribe:function(){n.allArrayUpdatedHandlers=n.allArrayUpdatedHandlers.filter(function(e){return e!==t})}}}}]),e}();n["default"]=l},{"../bower_components/core.js/library/fn/map":1,"./utils":121,"./utils.js":121}],104:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../bower_components/core.js/library/fn/map"),u=o(c),l=e("./constants"),f=r(l),d=e("./utils.js"),h=e("./utils"),p=null,_=function(){function e(t){i(this,e),(0,h.checkMethod)("ClassRepository(dolphin)"),(0,h.checkParam)(t,"dolphin"),this.dolphin=t,this.classes=new u["default"],this.beanFromDolphin=new u["default"],this.beanToDolphin=new u["default"],this.classInfos=new u["default"],this.beanAddedHandlers=[],this.beanRemovedHandlers=[],this.propertyUpdateHandlers=[],this.arrayUpdateHandlers=[]}return s(e,[{key:"fixType",value:function(e,t){switch(e){case f.BYTE:case f.SHORT:case f.INT:case f.LONG:return parseInt(t);case f.FLOAT:case f.DOUBLE:return parseFloat(t);case f.BOOLEAN:return"true"===String(t).toLowerCase();case f.STRING:case f.ENUM:return String(t);default:return t}}},{key:"fromDolphin",value:function(e,t,n){if(!(0,d.exists)(n))return null;switch(t){case f.DOLPHIN_BEAN:return e.beanFromDolphin.get(String(n));case f.DATE:return new Date(String(n));case f.CALENDAR:return new Date(String(n));case f.LOCAL_DATE_FIELD_TYPE:return new Date(String(n));case f.LOCAL_DATE_TIME_FIELD_TYPE:return new Date(String(n));case f.ZONED_DATE_TIME_FIELD_TYPE:return new Date(String(n));default:return this.fixType(t,n)}}},{key:"toDolphin",value:function(e,t,n){
if(!(0,d.exists)(n))return null;switch(t){case f.DOLPHIN_BEAN:return e.beanToDolphin.get(n);case f.DATE:return n instanceof Date?n.toISOString():n;case f.CALENDAR:return n instanceof Date?n.toISOString():n;case f.LOCAL_DATE_FIELD_TYPE:return n instanceof Date?n.toISOString():n;case f.LOCAL_DATE_TIME_FIELD_TYPE:return n instanceof Date?n.toISOString():n;case f.ZONED_DATE_TIME_FIELD_TYPE:return n instanceof Date?n.toISOString():n;default:return this.fixType(t,n)}}},{key:"sendListSplice",value:function(e,t,n,r,o,i){var a=e.dolphin,s=a.findPresentationModelById(t),c=this;if((0,d.exists)(s)){var u=e.classes.get(s.presentationModelType),l=u[n];if((0,d.exists)(l)){var f=[a.attribute("@@@ SOURCE_SYSTEM @@@",null,"client"),a.attribute("source",null,t),a.attribute("attribute",null,n),a.attribute("from",null,r),a.attribute("to",null,o),a.attribute("count",null,i.length)];i.forEach(function(t,n){f.push(a.attribute(n.toString(),null,c.toDolphin(e,l,t)))}),a.presentationModel.apply(a,[null,"@DP:LS@"].concat(f))}}}},{key:"validateList",value:function(e,t,n,r){var o=n[r];(0,d.exists)(o)||e.propertyUpdateHandlers.forEach(function(e){try{e(t,n,r,[],void 0)}catch(o){console.warn("An exception occurred while calling an onBeanUpdate-handler",o)}})}},{key:"block",value:function(e,t){if((0,d.exists)(p))throw new Error("Trying to create a block while another block exists");p={bean:e,propertyName:t}}},{key:"isBlocked",value:function(e,t){return(0,d.exists)(p)&&p.bean===e&&p.propertyName===t}},{key:"unblock",value:function(){p=null}},{key:"notifyBeanChange",value:function(e,t,n){(0,h.checkMethod)("ClassRepository.notifyBeanChange(bean, propertyName, newValue)"),(0,h.checkParam)(e,"bean"),(0,h.checkParam)(t,"propertyName");var r=this.beanToDolphin.get(e);if((0,d.exists)(r)){var o=this.dolphin.findPresentationModelById(r);if((0,d.exists)(o)){var i=this.classes.get(o.presentationModelType),a=i[t],s=o.findAttributeByPropertyName(t);if((0,d.exists)(a)&&(0,d.exists)(s)){var c=s.getValue();return s.setValue(this.toDolphin(this,a,n)),this.fromDolphin(this,a,c)}}}}},{key:"notifyArrayChange",value:function(e,t,n,r,o){if((0,h.checkMethod)("ClassRepository.notifyArrayChange(bean, propertyName, index, count, removedElements)"),(0,h.checkParam)(e,"bean"),(0,h.checkParam)(t,"propertyName"),(0,h.checkParam)(n,"index"),(0,h.checkParam)(r,"count"),(0,h.checkParam)(o,"removedElements"),!this.isBlocked(e,t)){var i=this.beanToDolphin.get(e),a=e[t];if((0,d.exists)(i)&&(0,d.exists)(a)){var s=Array.isArray(o)?o.length:0;this.sendListSplice(this,i,t,n,n+s,a.slice(n,n+r))}}}},{key:"onBeanAdded",value:function(e){(0,h.checkMethod)("ClassRepository.onBeanAdded(handler)"),(0,h.checkParam)(e,"handler"),this.beanAddedHandlers.push(e)}},{key:"onBeanRemoved",value:function(e){(0,h.checkMethod)("ClassRepository.onBeanRemoved(handler)"),(0,h.checkParam)(e,"handler"),this.beanRemovedHandlers.push(e)}},{key:"onBeanUpdate",value:function(e){(0,h.checkMethod)("ClassRepository.onBeanUpdate(handler)"),(0,h.checkParam)(e,"handler"),this.propertyUpdateHandlers.push(e)}},{key:"onArrayUpdate",value:function(e){(0,h.checkMethod)("ClassRepository.onArrayUpdate(handler)"),(0,h.checkParam)(e,"handler"),this.arrayUpdateHandlers.push(e)}},{key:"registerClass",value:function(e){if((0,h.checkMethod)("ClassRepository.registerClass(model)"),(0,h.checkParam)(e,"model"),!this.classes.has(e.id)){var t={};e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(e){t[e.propertyName]=e.value}),this.classes.set(e.id,t)}}},{key:"unregisterClass",value:function(e){(0,h.checkMethod)("ClassRepository.unregisterClass(model)"),(0,h.checkParam)(e,"model"),this.classes["delete"](e.id)}},{key:"load",value:function(e){(0,h.checkMethod)("ClassRepository.load(model)"),(0,h.checkParam)(e,"model");var t=this,n=this.classes.get(e.presentationModelType),r={};return e.attributes.filter(function(e){return e.propertyName.search(/^@/)<0}).forEach(function(o){r[o.propertyName]=null,o.onValueChange(function(i){if(i.oldValue!==i.newValue){var a=t.fromDolphin(t,n[o.propertyName],i.oldValue),s=t.fromDolphin(t,n[o.propertyName],i.newValue);t.propertyUpdateHandlers.forEach(function(t){try{t(e.presentationModelType,r,o.propertyName,s,a)}catch(n){console.warn("An exception occurred while calling an onBeanUpdate-handler",n)}})}})}),this.beanFromDolphin.set(e.id,r),this.beanToDolphin.set(r,e.id),this.classInfos.set(e.id,n),this.beanAddedHandlers.forEach(function(t){try{t(e.presentationModelType,r)}catch(n){console.warn("An exception occurred while calling an onBeanAdded-handler",n)}}),r}},{key:"unload",value:function(e){(0,h.checkMethod)("ClassRepository.unload(model)"),(0,h.checkParam)(e,"model");var t=this.beanFromDolphin.get(e.id);return this.beanFromDolphin["delete"](e.id),this.beanToDolphin["delete"](t),this.classInfos["delete"](e.id),(0,d.exists)(t)&&this.beanRemovedHandlers.forEach(function(n){try{n(e.presentationModelType,t)}catch(r){console.warn("An exception occurred while calling an onBeanRemoved-handler",r)}}),t}},{key:"spliceListEntry",value:function(e){(0,h.checkMethod)("ClassRepository.spliceListEntry(model)"),(0,h.checkParam)(e,"model");var t=e.findAttributeByPropertyName("source"),n=e.findAttributeByPropertyName("attribute"),r=e.findAttributeByPropertyName("from"),o=e.findAttributeByPropertyName("to"),i=e.findAttributeByPropertyName("count");if(!((0,d.exists)(t)&&(0,d.exists)(n)&&(0,d.exists)(r)&&(0,d.exists)(o)&&(0,d.exists)(i)))throw new Error("Invalid list modification update received");var a=this.classInfos.get(t.value),s=this.beanFromDolphin.get(t.value);if(!(0,d.exists)(s)||!(0,d.exists)(a))throw new Error("Invalid list modification update received. Source bean unknown.");var c=e.presentationModelType;this.validateList(this,c,s,n.value);for(var u=[],l=null,f=0;f<i.value;f++){if(l=e.findAttributeByPropertyName(f.toString()),!(0,d.exists)(l))throw new Error("Invalid list modification update received");u.push(this.fromDolphin(this,a[n.value],l.value))}try{this.block(s,n.value),this.arrayUpdateHandlers.forEach(function(e){try{e(c,s,n.value,r.value,o.value-r.value,u)}catch(t){console.warn("An exception occurred while calling an onArrayUpdate-handler",t)}})}finally{this.unblock()}}},{key:"mapParamToDolphin",value:function(e){if(!(0,d.exists)(e))return e;var t="undefined"==typeof e?"undefined":a(e);if("object"===t){if(e instanceof Date)return e.toISOString();var n=this.beanToDolphin.get(e);if((0,d.exists)(n))return n;throw new TypeError("Only managed Dolphin Beans can be used")}if("string"===t||"number"===t||"boolean"===t)return e;throw new TypeError("Only managed Dolphin Beans and primitive types can be used")}},{key:"mapDolphinToBean",value:function(e){return this.fromDolphin(this,f.DOLPHIN_BEAN,e)}}]),e}();n["default"]=_},{"../bower_components/core.js/library/fn/map":1,"./constants":115,"./utils":121,"./utils.js":121}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./OpenDolphin.js"),s=r(a),c=e("./utils"),u=e("./connector.js"),l=r(u),f=e("./beanmanager.js"),d=r(f),h=e("./classrepo.js"),p=r(h),_=e("./controllermanager.js"),y=r(_),v=e("./clientcontext.js"),m=r(v),b=e("./platformHttpTransmitter.js"),g=r(b),w=function(){function e(){o(this,e)}return i(e,[{key:"create",value:function(e,t){(0,c.checkMethod)("connect(url, config)"),(0,c.checkParam)(e,"url"),console.log("Creating client context "+e+"    "+JSON.stringify(t));var n=s["default"].makeDolphin().url(e).reset(!1).slackMS(4).supportCORS(!0).maxBatchSize(Number.MAX_SAFE_INTEGER);(0,c.exists)(t)&&((0,c.exists)(t.errorHandler)&&n.errorHandler(t.errorHandler),(0,c.exists)(t.headersInfo)&&Object.keys(t.headersInfo).length>0&&n.headersInfo(t.headersInfo));var r=n.build(),o=new g["default"](e,t);o.on("error",function(e){h.emit("error",e)}),r.clientConnector.transmitter=o;var i=new p["default"](r),a=new d["default"](i),u=new l["default"](e,r,i,t),f=new y["default"](r,i,u),h=new m["default"](r,a,f,u);return h}}]),e}();n["default"]=w,n.ClientContextFactory=w},{"./OpenDolphin.js":99,"./beanmanager.js":103,"./classrepo.js":104,"./clientcontext.js":106,"./connector.js":114,"./controllermanager.js":116,"./platformHttpTransmitter.js":119,"./utils":121}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("emitter-component"),s=r(a),c=e("../bower_components/core.js/library/fn/promise"),u=r(c),l=e("./commandFactory"),f=r(l),d=e("./utils.js"),h=e("./utils"),p=function(){function e(t,n,r,i){o(this,e),(0,h.checkMethod)("ClientContext(dolphin, beanManager, controllerManager, connector)"),(0,h.checkParam)(t,"dolphin"),(0,h.checkParam)(n,"beanManager"),(0,h.checkParam)(r,"controllerManager"),(0,h.checkParam)(i,"connector"),this.dolphin=t,this.beanManager=n,this._controllerManager=r,this._connector=i,this.connectionPromise=null,this.isConnected=!1}return i(e,[{key:"connect",value:function(){var e=this;return this.connectionPromise=new u["default"](function(t){e._connector.connect(),e._connector.invoke(f["default"].createCreateContextCommand()).then(function(){e.isConnected=!0,t()})}),this.connectionPromise}},{key:"onConnect",value:function(){return(0,d.exists)(this.connectionPromise)?this.isConnected?new u["default"](function(e){e()}):this.connectionPromise:this.connect()}},{key:"createController",value:function(e){return(0,h.checkMethod)("ClientContext.createController(name)"),(0,h.checkParam)(e,"name"),this._controllerManager.createController(e)}},{key:"disconnect",value:function(){var e=this;return this.dolphin.stopPushListening(),new u["default"](function(t){e._controllerManager.destroy().then(function(){e._connector.invoke(f["default"].createDestroyContextCommand()),e.dolphin=null,e.beanManager=null,e._controllerManager=null,e._connector=null,t()})})}}]),e}();n["default"]=p,(0,s["default"])(p.prototype)},{"../bower_components/core.js/library/fn/promise":2,"./commandFactory":108,"./utils":121,"./utils.js":121,"emitter-component":80}],107:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./utils.js"),a=function(){function e(){r(this,e)}return o(e,null,[{key:"encodeCreatePresentationModelCommand",value:function(e){return{p:e.pmId,t:e.pmType,a:e.attributes.map(function(e){var t={n:e.propertyName,i:e.id};return(0,i.exists)(e.value)&&(t.v=e.value),t}),id:"CreatePresentationModel"}}},{key:"decodeCreatePresentationModelCommand",value:function(e){return{id:"CreatePresentationModel",className:"org.opendolphin.core.comm.CreatePresentationModelCommand",clientSideOnly:!1,pmId:e.p,pmType:e.t,attributes:e.a.map(function(e){return{propertyName:e.n,id:e.i,value:(0,i.exists)(e.v)?e.v:null,qualifier:null}})}}},{key:"encodeValueChangedCommand",value:function(e){var t={a:e.attributeId};return(0,i.exists)(e.oldValue)&&(t.o=e.oldValue),(0,i.exists)(e.newValue)&&(t.n=e.newValue),t.id="ValueChanged",t}},{key:"decodeValueChangedCommand",value:function(e){return{id:"ValueChanged",className:"org.opendolphin.core.comm.ValueChangedCommand",attributeId:e.a,oldValue:(0,i.exists)(e.o)?e.o:null,newValue:(0,i.exists)(e.n)?e.n:null}}},{key:"encode",value:function(e){var t=this;return JSON.stringify(e.map(function(e){return"CreatePresentationModel"===e.id?t.encodeCreatePresentationModelCommand(e):"ValueChanged"===e.id?t.encodeValueChangedCommand(e):e}))}},{key:"decode",value:function(e){var t=this;return"string"==typeof e?JSON.parse(e).map(function(e){return"CreatePresentationModel"===e.id?t.decodeCreatePresentationModelCommand(e):"ValueChanged"===e.id?t.decodeValueChangedCommand(e):e}):e}}]),e}();n["default"]=a},{"./utils.js":121}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./commands/createContextCommand.js"),s=r(a),c=e("./commands/createControllerCommand.js"),u=r(c),l=e("./commands/callActionCommand.js"),f=r(l),d=e("./commands/destroyControllerCommand.js"),h=r(d),p=e("./commands/destroyContextCommand.js"),_=r(p),y=function(){function e(){o(this,e)}return i(e,null,[{key:"createCreateContextCommand",value:function(){return new s["default"]}},{key:"createCreateControllerCommand",value:function(e,t){return new u["default"](e,t)}},{key:"createCallActionCommand",value:function(e,t,n){return new f["default"](e,t,n)}},{key:"createDestroyControllerCommand",value:function(e){return new h["default"](e)}},{key:"createDestroyContextCommand",value:function(){return new _["default"]}}]),e}();n["default"]=y},{"./commands/callActionCommand.js":109,"./commands/createContextCommand.js":110,"./commands/createControllerCommand.js":111,"./commands/destroyContextCommand.js":112,"./commands/destroyControllerCommand.js":113}],109:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils"),i=function a(e,t,n){r(this,a),(0,o.checkMethod)("CreateControllerCommand.invoke(controllerid, actionName, params)"),(0,o.checkParam)(e,"controllerid"),(0,o.checkParam)(t,"actionName"),this.id="CallAction",this.c=e,this.n=t,this.p=n};n["default"]=i},{"../utils":121}],110:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils"),i=function a(){r(this,a),(0,o.checkMethod)("CreateContextCommand.invoke()"),this.id="CreateContext"};n["default"]=i},{"../utils":121}],111:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils"),i=function a(e,t){r(this,a),(0,o.checkMethod)("CreateControllerCommand.invoke(controllerName, parentControllerId)"),(0,o.checkParam)(e,"controllerName"),this.id="CreateController",this.n=e,this.p=t};n["default"]=i},{"../utils":121}],112:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils"),i=function a(){r(this,a),(0,o.checkMethod)("DestroyContextCommand()"),this.id="DestroyContext"};n["default"]=i},{"../utils":121}],113:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils"),i=function a(e){r(this,a),(0,o.checkMethod)("DestroyControllerCommand(controllerId)"),(0,o.checkParam)(e,"controllerId"),this.id="DestroyController",this.c=e};n["default"]=i},{"../utils":121}],114:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./OpenDolphin.js"),s=r(a),c=e("../bower_components/core.js/library/fn/promise"),u=r(c),l=e("./ClientModelStore"),f=r(l),d=e("./utils.js"),h=e("./utils"),p="@@@ DOLPHIN_BEAN @@@",_="@@@ CONTROLLER_ACTION_CALL_BEAN @@@",y="@@@ HIGHLANDER_BEAN @@@",v="@DP:LS@",m="@@@ SOURCE_SYSTEM @@@",b="client",g="server",w=function(){function e(t,n,r,i){o(this,e),(0,h.checkMethod)("Connector(url, dolphin, classRepository, config)"),(0,h.checkParam)(t,"url"),(0,h.checkParam)(n,"dolphin"),(0,h.checkParam)(r,"classRepository");var a=this;this.dolphin=n,this.config=i,this.classRepository=r,this.highlanderPMResolver=function(){},this.highlanderPMPromise=new u["default"](function(e){a.highlanderPMResolver=e}),n.getClientModelStore().onModelStoreChange(function(e){var t=e.clientPresentationModel,n=t.findAttributeByPropertyName(m);(0,d.exists)(n)&&n.value===g&&(e.eventType===f["default"].Type.ADDED?a.onModelAdded(t):e.eventType===f["default"].Type.REMOVED&&a.onModelRemoved(t))})}return i(e,[{key:"connect",value:function(){var e=this;setTimeout(function(){e.dolphin.startPushListening(s["default"].createStartLongPollCommand(),s["default"].createInterruptLongPollCommand())},0)}},{key:"onModelAdded",value:function(e){(0,h.checkMethod)("Connector.onModelAdded(model)"),(0,h.checkParam)(e,"model");var t=e.presentationModelType;switch(t){case _:break;case p:this.classRepository.registerClass(e);break;case y:this.highlanderPMResolver(e);break;case v:this.classRepository.spliceListEntry(e),this.dolphin.deletePresentationModel(e);break;default:this.classRepository.load(e)}}},{key:"onModelRemoved",value:function(e){(0,h.checkMethod)("Connector.onModelRemoved(model)"),(0,h.checkParam)(e,"model");var t=e.presentationModelType;switch(t){case p:this.classRepository.unregisterClass(e);break;case v:break;default:this.classRepository.unload(e)}}},{key:"invoke",value:function(e){(0,h.checkMethod)("Connector.invoke(command)"),(0,h.checkParam)(e,"command");var t=this.dolphin;return new u["default"](function(n){t.send(e,{onFinished:function(){n()}})})}},{key:"getHighlanderPM",value:function(){return this.highlanderPMPromise}}]),e}();n["default"]=w,n.SOURCE_SYSTEM=m,n.SOURCE_SYSTEM_CLIENT=b,n.SOURCE_SYSTEM_SERVER=g,n.ACTION_CALL_BEAN=_},{"../bower_components/core.js/library/fn/promise":2,"./ClientModelStore":86,"./OpenDolphin.js":99,"./utils":121,"./utils.js":121}],115:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.DOLPHIN_BEAN=0,n.BYTE=1,n.SHORT=2,n.INT=3,n.LONG=4,n.FLOAT=5,n.DOUBLE=6,n.BOOLEAN=7,n.STRING=8,n.DATE=9,n.ENUM=10,n.CALENDAR=11,n.LOCAL_DATE_FIELD_TYPE=55,n.LOCAL_DATE_TIME_FIELD_TYPE=52,n.ZONED_DATE_TIME_FIELD_TYPE=54},{}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../bower_components/core.js/library/fn/promise"),s=r(a),c=e("../bower_components/core.js/library/fn/set"),u=r(c),l=e("./utils"),f=e("./controllerproxy.js"),d=r(f),h=e("./commandFactory.js"),p=r(h),_=e("./connector.js"),y="controllerId",v="model",m="errorCode",b=function(){function e(t,n,r){o(this,e),(0,l.checkMethod)("ControllerManager(dolphin, classRepository, connector)"),(0,l.checkParam)(t,"dolphin"),(0,l.checkParam)(n,"classRepository"),(0,l.checkParam)(r,"connector"),this.dolphin=t,this.classRepository=n,this.connector=r,this.controllers=new u["default"]}return i(e,[{key:"createController",value:function(e){return this._createController(e,null)}},{key:"_createController",value:function(e,t){(0,l.checkMethod)("ControllerManager.createController(name)"),(0,l.checkParam)(e,"name");var n=this,r=void 0,o=void 0,i=void 0,a=void 0;return new s["default"](function(s){n.connector.getHighlanderPM().then(function(c){n.connector.invoke(p["default"].createCreateControllerCommand(e,t)).then(function(){r=c.findAttributeByPropertyName(y).getValue(),o=c.findAttributeByPropertyName(v).getValue(),i=n.classRepository.mapDolphinToBean(o),a=new d["default"](r,i,n),n.controllers.add(a),s(a)})})})}},{key:"invokeAction",value:function(e,t,n){(0,l.checkMethod)("ControllerManager.invokeAction(controllerId, actionName, params)"),(0,l.checkParam)(e,"controllerId"),(0,l.checkParam)(t,"actionName");var r=this;return new s["default"](function(o,i){var a=[r.dolphin.attribute(_.SOURCE_SYSTEM,null,_.SOURCE_SYSTEM_CLIENT),r.dolphin.attribute(m)],s=r.dolphin.presentationModel.apply(r.dolphin,[null,_.ACTION_CALL_BEAN].concat(a)),c=[];if((0,l.exists)(n))for(var u in n)if(n.hasOwnProperty(u)){var f=r.classRepository.mapParamToDolphin(n[u]);c.push({n:u,v:f})}r.connector.invoke(p["default"].createCallActionCommand(e,t,c)).then(function(){var e=s.findAttributeByPropertyName(m).getValue();e?i(new Error("Server side ControllerAction "+t+" caused an error. Please see server log for details.")):o(),r.dolphin.deletePresentationModel(s)})})}},{key:"destroyController",value:function(e){(0,l.checkMethod)("ControllerManager.destroyController(controller)"),(0,l.checkParam)(e,"controller");var t=this;return new s["default"](function(n){t.connector.getHighlanderPM().then(function(r){t.controllers["delete"](e),r.findAttributeByPropertyName(y).setValue(e.controllerId),t.connector.invoke(p["default"].createDestroyControllerCommand(e.getId())).then(n)})})}},{key:"destroy",value:function(){var e=this.controllers,t=[];return this.controllers=new u["default"],e.forEach(function(e){try{t.push(e.destroy())}catch(n){}}),s["default"].all(t)}}]),e}();n["default"]=b},{"../bower_components/core.js/library/fn/promise":2,"../bower_components/core.js/library/fn/set":3,"./commandFactory.js":108,"./connector.js":114,"./controllerproxy.js":117,"./utils":121}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../bower_components/core.js/library/fn/set"),s=r(a),c=e("./utils"),u=function(){function e(t,n,r){o(this,e),(0,c.checkMethod)("ControllerProxy(controllerId, model, manager)"),(0,c.checkParam)(t,"controllerId"),(0,c.checkParam)(n,"model"),(0,c.checkParam)(r,"manager"),this.controllerId=t,this.model=n,this.manager=r,this.destroyed=!1,this.onDestroyedHandlers=new s["default"]}return i(e,[{key:"getModel",value:function(){return this.model}},{key:"getId",value:function(){return this.controllerId}},{key:"invoke",value:function(e,t){if((0,c.checkMethod)("ControllerProxy.invoke(name, params)"),(0,c.checkParam)(e,"name"),this.destroyed)throw new Error("The controller was already destroyed");return this.manager.invokeAction(this.controllerId,e,t)}},{key:"createController",value:function(e){return this.manager._createController(e,this.getId())}},{key:"destroy",value:function(){var e=this;if(this.destroyed)throw new Error("The controller was already destroyed");return this.destroyed=!0,this.onDestroyedHandlers.forEach(function(t){try{t(e)}catch(n){console.warn("An exception occurred while calling an onDestroyed-handler",n)}},this),this.manager.destroyController(this)}},{key:"onDestroyed",value:function(e){(0,c.checkMethod)("ControllerProxy.onDestroyed(handler)"),(0,c.checkParam)(e,"handler");var t=this;return this.onDestroyedHandlers.add(e),{unsubscribe:function(){t.onDestroyedHandlers["delete"](e)}}}}]),e}();n["default"]=u},{"../bower_components/core.js/library/fn/set":3,"./utils":121}],118:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});n.DolphinRemotingError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Remoting Error",n=arguments[1];r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.detail=n||void 0,i}return i(t,e),t}(Error),n.DolphinSessionError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Session Error";return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),t}(Error),n.HttpResponseError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Response Error";return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),t}(Error),n.HttpNetworkError=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Http Network Error";return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),t}(Error)},{}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("emitter-component"),s=r(a),c=e("./utils"),u=e("./errors.js"),l=e("./codec.js"),f=r(l),d=e("./remotingErrorHandler"),h=r(d),p=4,_=200,y=408,v="dolphin_platform_intern_",m=v+"dolphinClientId",b=function(){function e(t,n){o(this,e),this.url=t,this.config=n,this.headersInfo=(0,c.exists)(n)?n.headersInfo:null;var r=(0,c.exists)(n)?n.connection:null;this.maxRetry=(0,c.exists)(r)&&(0,c.exists)(r.maxRetry)?r.maxRetry:3,this.timeout=(0,c.exists)(r)&&(0,c.exists)(r.timeout)?r.timeout:5e3,this.failed_attempt=0}return i(e,[{key:"_handleError",value:function(e,t){var n=(0,c.exists)(this.config)?this.config.connection:null,r=(0,c.exists)(n)&&(0,c.exists)(n.errorHandlers)?n.errorHandlers:[new h["default"]];r.forEach(function(e){e.onError(t)}),e(t)}},{key:"_send",value:function(e){var t=this;return new Promise(function(n,r){var o=new XMLHttpRequest;if(o.withCredentials=!0,o.onerror=function(e){t._handleError(r,new u.HttpNetworkError("PlatformHttpTransmitter: Network error",e))},o.onreadystatechange=function(){if(o.readyState===p)switch(o.status){case _:t.failed_attempt=0;var e=o.getResponseHeader(m);(0,c.exists)(e)?((0,c.exists)(t.clientId)&&t.clientId!==e&&t._handleError(r,new u.DolphinSessionError("PlatformHttpTransmitter: ClientId of the response did not match")),t.clientId=e):t._handleError(r,new u.DolphinSessionError("PlatformHttpTransmitter: Server did not send a clientId")),n(o.responseText);break;case y:t._handleError(r,new u.DolphinSessionError("PlatformHttpTransmitter: Session Timeout"));break;default:t.failed_attempt<=t.maxRetry&&(t.failed_attempt=t.failed_attempt+1),t._handleError(r,new u.HttpResponseError("PlatformHttpTransmitter: HTTP Status != 200 ("+o.status+")"))}},o.open("POST",t.url),(0,c.exists)(t.clientId)&&o.setRequestHeader(m,t.clientId),(0,c.exists)(t.headersInfo))for(var i in t.headersInfo)t.headersInfo.hasOwnProperty(i)&&o.setRequestHeader(i,t.headersInfo[i]);t.failed_attempt>t.maxRetry?setTimeout(function(){o.send(f["default"].encode(e))},t.timeout):o.send(f["default"].encode(e))})}},{key:"transmit",value:function(e,t){var n=this;this._send(e).then(function(e){if(e.trim().length>0)try{var r=f["default"].decode(e);t(r)}catch(o){n.emit("error",new u.DolphinRemotingError("PlatformHttpTransmitter: Parse error: (Incorrect response = "+e+")")),t([])}else n.emit("error",new u.DolphinRemotingError("PlatformHttpTransmitter: Empty response")),t([])})["catch"](function(e){n.emit("error",e),t([])})}},{key:"signal",value:function(e){var t=this;this._send([e])["catch"](function(e){return t.emit("error",e)})}}]),e}();n["default"]=b,(0,s["default"])(b.prototype)},{"./codec.js":107,"./errors.js":118,"./remotingErrorHandler":120,"./utils":121,"emitter-component":80}],120:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"onError",value:function(e){window.console.error(e)}}]),e}();n["default"]=i},{}],121:[function(e,t,n){"use strict";var r,o=function(e){return"undefined"!=typeof e&&null!==e};t.exports.exists=o,t.exports.checkMethod=function(e){r=e},t.exports.checkParam=function(e,t){if(!o(e))throw new Error("The parameter "+t+" is mandatory in "+r)}},{}]},{},[105])(105)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],71:[function(e,t,n){"use strict";function r(e){return"undefined"!=typeof e&&null!==e}function o(e,t){do{var n=t.match(/^([^\.]+)\.(.*)$/),o=null!==n?n[1]:t;if(t=null!==n?n[2]:null,Array.isArray(e)){var i=parseInt(o);if(isNaN(i))e=e[o];else{var a=Polymer.Collection.get(e);e=a.getItem(i)}}else e=e[o]}while(null!==t&&r(e));return e}function i(e,t){var n=t.match(/^(.*)\.[^\.]*$/);return r(n)?(r(s)||(s="string"!=typeof Polymer.version||null!==Polymer.version.match(/^1\.[01]\./)),s?o(e,n[1]):e.get(n[1],e)):e}function a(e){var t=new c(e.beanManager);return function(n){var o="INITIALIZING";return{properties:{model:{type:Object,value:function(){return{}}}},observers:["_dolphinObserver(model.*)"],created:function(){var t=this;e.createController(n).then(function(e){t._controller=e,o="READY",t.set("model",e.model),t.fire("controller-ready"),e.onDestroyed(function(){o="DESTROYED",t.set("model",null),t.fire("controller-destroyed")})})},invoke:function(e,t){return"READY"!==o?void console.warn("Controller.invoke() called before init() finished"):this._controller.invoke(e,t)},destroy:function(){this._controller.destroy()},_dolphinObserver:function(n){if("READY"===o){var a,s,c,u,l=n.path,f=n.value;if(r(f)&&r(f.indexSplices)){if(l=l.substr(0,l.length-".splices".length),a=i(this,l),r(a)){s=l.match(/[^\.]+$/);var d=f.indexSplices.length;for(c=0;c<d;c++){var h=f.indexSplices[c];e.beanManager.notifyArrayChange(a,s[0],h.index,h.addedCount,h.removed);var p=a[s[0]];for(u=0;u<h.removed.length;u++)t.unbind(this,l+"."+(h.index+u),h.removed[u]);for(u=h.index+h.addedCount;u<p.length;u++){var _=u-h.addedCount+h.removed.length;t.unbind(this,l+"."+_,p[u])}for(u=h.index;u<p.length;u++)t.bind(this,l+"."+u,p[u]);
}}}else if(a=i(this,l),r(a)&&!Array.isArray(a)&&!Array.isArray(f)){s=l.match(/[^\.]+$/);var y=e.beanManager.notifyBeanChange(a,s[0],f);r(y)&&t.unbind(this,l,y),r(f)&&t.bind(this,l,f)}}}}}}var s,c=e("./binder.js").Binder;n.setupCreateBehavior=a},{"./binder.js":72}],72:[function(e,t,n){"use strict";function r(e){return"undefined"!=typeof e&&null!==e}function o(e,t){return function(){t.apply(e,arguments)}}function i(e,t){if(e===t||!r(e)&&!r(t))return!0;if(r(e)!==r(t))return!1;var n=e.length;if(t.length!==n)return!1;for(var o=0;o<n;o++)if(e[o]!==t[o])return!1;return!0}function a(e){this.listeners=new s,e.onBeanUpdate(o(this,this.onBeanUpdateHandler)),e.onArrayUpdate(o(this,this.onArrayUpdateHandler))}var s=e("../bower_components/core.js/library/fn/map");a.prototype.onBeanUpdateHandler=function(e,t,n,o){if(o!==n){var i=this.listeners.get(e);if(r(i)&&i.length>0){var a=i[0],s=a.element,c=a.rootPath+"."+t;s.set(c,n)}else e[t]=n}},a.prototype.onArrayUpdateHandler=function(e,t,n,o,a){var s=e[t],c=s.slice(n,n+o);if(!i(a,c)){var u=this.listeners.get(e);if(r(u)&&u.length>0){var l=u[0],f=l.element,d=l.rootPath+"."+t;"undefined"==typeof a?f.splice(d,n,o):f.splice.apply(f,[d,n,o].concat(a))}else"undefined"==typeof a?s.splice(n,o):s.splice.apply(s,[n,o].concat(a))}},a.prototype.bind=function(e,t,n){if(r(n)&&"object"==typeof n){var o=this.listeners.get(n);if(r(o)||(o=[],this.listeners.set(n,o)),o.push({element:e,rootPath:t}),Array.isArray(n))for(var i=0;i<n.length;i++)this.bind(e,t+"."+i,n[i]);else if("object"==typeof n)for(var a in n)n.hasOwnProperty(a)&&this.bind(e,t+"."+a,n[a])}},a.prototype.unbind=function(e,t,n){if(r(n)&&"object"==typeof n){var o=this.listeners.get(n);if(r(o))for(var i=o.length,a=0;a<i;a++){var s=o[a];if(s.element===e&&s.rootPath===t){if(o.splice(a,1),Array.isArray(n))for(var c=0;c<n.length;c++)this.unbind(e,t+"."+c,n[c]);else if("object"==typeof n)for(var u in n)n.hasOwnProperty(u)&&this.unbind(e,t+"."+u,n[u]);return}}}},n.Binder=a},{"../bower_components/core.js/library/fn/map":1}],73:[function(e,t,n){"use strict";var r=e("../bower_components/dolphin-platform-js/dist/dolphin-platform.js"),o=e("./behavior.js").setupCreateBehavior;n.clientContext=function(e,t){var n=new r.ClientContextFactory,i=n.create(e,t);return i.createBehavior=o(i),i}},{"../bower_components/dolphin-platform-js/dist/dolphin-platform.js":70,"./behavior.js":71}]},{},[73])(73)});
//# sourceMappingURL=dolphin-platform-polymer.min.js.map
